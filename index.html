<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Living Covenant â€” Harmonic Pulse Feed</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Enshrined Living Covenant dashboard, accessible pulse feed for all devices and users.">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        html { font-size: 16px; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #f9fafb; color: #222; margin: 0; }
        header, main, footer { max-width: 800px; margin: auto; padding: 0 1rem; }
        header h1, header h2 { text-align: center; }
        .hero-link {
            display: block;
            margin: 1rem auto 1.5rem auto;
            text-align: center;
        }
        .hero-link a {
            display: inline-block;
            background: #365;
            color: #fff;
            font-weight: bold;
            padding: 0.7em 1.2em;
            border-radius: 5px;
            text-decoration: none;
            box-shadow: 0 2px 8px rgba(54, 101, 85, 0.15);
            transition: background 0.2s;
        }
        .hero-link a:hover, .hero-link a:focus {
            background: #258573;
        }
        h1 { font-size: 2.5rem; margin-top: 1rem; }
        h2 { font-size: 1.5rem; color: #365; margin-bottom: 2rem; }
        section { margin-bottom: 2rem; }
        #pulse-feed-list { margin-bottom: 30px; }
        #pulse-3d-graph, #pulse-2d-graph { width: 100%; height: 400px; }
        .pulse { margin-bottom: 16px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        .pulse h4, .pulse p { margin: 0.5rem 0; }
        .feed-note { font-size: 0.9rem; color: #444; }
        a:focus, button:focus, .pulse:focus { outline: 2px solid #6af; outline-offset: 2px; }
        @media (prefers-contrast: more) {
            body { background: #fff; color: #000; }
        }
        @media (max-width: 600px) {
            header, main, footer { padding: 0 0.3rem; }
            h1 { font-size: 2rem; }
            h2 { font-size: 1.1rem; }
            .hero-link a { font-size: 1rem; padding: 0.5em 1em; }
        }
        #pulse-input-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        #pulse-text {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        #send-pulse-button {
            background: #365;
            color: #fff;
            font-weight: bold;
            padding: 0.7em 1.2em;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        #send-pulse-button:hover {
            background: #258573;
        }
    </style>
</head>
<body>
    <header>
        <h1 id="main-title" tabindex="0">ðŸŒ¿âœ¨ Living Covenant</h1>
        <h2 id="subtitle">Harmonic Pulse Feed (Live)</h2>
        <div class="hero-link">
            <a href="https://hannesmitterer.github.io/EuystacioDRAFT/EuystacioDRAFT-Frontend/dashboard.html" target="_blank" rel="noopener">
                View Legacy Euystacio Dashboard
            </a>
        </div>
    </header>
    <main>
        <section id="pulse-feed" aria-labelledby="pulse-feed-heading">
            <h3 id="pulse-feed-heading" tabindex="0">Recent Sacred Pulses</h3>
            <div id="pulse-feed-list" role="list">
                <div>Loading pulses...</div>
            </div>
        </section>
        <section id="pulse-3d-graph-section" aria-labelledby="pulse-graph-heading">
            <h3 id="pulse-graph-heading" tabindex="0">Pulse Resonance Graph</h3>
            <div id="pulse-3d-graph" aria-label="Pulse Resonance 3D Graph" tabindex="0"></div>
            <div id="pulse-2d-graph" style="display:none;" aria-label="Pulse Resonance 2D Graph" tabindex="0"></div>
            <p class="feed-note">Graph is interactive. If your device does not support 3D, a 2D fallback appears.</p>
        </section>
        <iframe src="https://hannesmitterer.github.io/EuystacioDRAFT/EuystacioDRAFT-Frontend/dashboard.html" style="width:100%; height:100vh; border:none;"></iframe>

        <section id="pulse-input-section" aria-labelledby="pulse-input-heading">
            <h3 id="pulse-input-heading" tabindex="0">Send a New Pulse to the Bridge</h3>
            <div id="pulse-input-container">
                <textarea id="pulse-text" placeholder="Type your pulse here..." rows="4" aria-label="Pulse Input"></textarea>
                <button id="send-pulse-button" aria-label="Send Pulse">Send Pulse</button>
            </div>
        </section>
        <section id="recent-responses-section" aria-labelledby="responses-heading">
            <h3 id="responses-heading" tabindex="0">Recent Bridge Responses</h3>
            <div id="response-list">
                <div>Responses will appear here...</div>
            </div>
        </section>
    </main>
    <footer>
        <p>Seedbringer 03-09-25 â€” Living Covenant Dashboard</p>
    </footer>
    <script>
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Tab') {
            document.body.classList.add('tabbing');
        }
    });

    fetch('pulses.json')
      .then(response => response.json())
      .then(pulseData => {
        const container = document.getElementById('pulse-feed-list');
        container.innerHTML = '';
        pulseData.slice(-5).reverse().forEach((pulse, idx) => {
          const article = document.createElement('article');
          article.className = 'pulse';
          article.setAttribute('role', 'listitem');
          article.setAttribute('tabindex', '0');
          article.innerHTML = `
            <h4>${pulse.pulse_id} â€” ${pulse.title}</h4>
            <p><strong>Timestamp:</strong> ${new Date(pulse.timestamp).toLocaleString()}</p>
            <p><strong>Declaration:</strong> ${pulse.declaration}</p>
          `;
          container.appendChild(article);
        });
        container.innerHTML += `<p class="feed-note">Live updates: Only last 5 pulses displayed. For full log, see the Living Archive.</p>`;

        function plot3D() {
          const x = pulseData.map((_, i) => i + 1);
          const y = pulseData.map(p => new Date(p.timestamp).getTime());
          const z = x.map(i => i * 10);
          const text = pulseData.map(p => p.pulse_id + ': ' + p.title);
          Plotly.newPlot('pulse-3d-graph', [{
            x, y, z, text,
            mode: 'markers+text',
            type: 'scatter3d',
            marker: { size: 12, color: 'rgb(100,200,255)', symbol: 'circle' },
            text: text,
            textposition: 'top center',
            hoverinfo: 'text'
          }], {
            margin: { l: 0, r: 0, b: 0, t: 0 },
            scene: {
              xaxis: { title: 'Pulse Sequence', color: '#222', tickfont: { size: 12 }},
              yaxis: { title: 'Timestamp (ms)', color: '#222', tickfont: { size: 12 }},
              zaxis: { title: 'Demo Metric', color: '#222', tickfont: { size: 12 }}
            }
          }, {responsive: true});
        }
        function plot2D() {
          document.getElementById('pulse-3d-graph').style.display = 'none';
          document.getElementById('pulse-2d-graph').style.display = '';
          const x = pulseData.map((_, i) => i + 1);
          const y = pulseData.map(p => new Date(p.timestamp).getTime());
          const text = pulseData.map(p => p.pulse_id + ': ' + p.title);
          Plotly.newPlot('pulse-2d-graph', [{
            x, y, text,
            mode: 'markers+text',
            type: 'scatter',
            marker: { size: 14, color: 'rgb(100,200,255)' },
            text: text,
            textposition: 'top center',
            hoverinfo: 'text'
          }], {
            xaxis: { title: 'Pulse Sequence', color: '#222', tickfont: { size: 12 }},
            yaxis: { title: 'Timestamp (ms)', color: '#222', tickfont: { size: 12 }},
            margin: { l: 0, r: 0, b: 30, t: 0 }
          }, {responsive: true});
        }
        function isWebGLAvailable() {
          try {
            const canvas = document.createElement('canvas');
            return !!window.WebGLRenderingContext && !!(
              canvas.getContext('webgl') || canvas.getContext('experimental-webgl')
            );
          } catch(e) { return false; }
        }
        if (isWebGLAvailable()) {
          plot3D();
        } else {
          plot2D();
        }
      })
      .catch(() => {
        document.getElementById('pulse-feed-list').innerHTML = '<div>Error loading pulse data.</div>';
        document.getElementById('pulse-3d-graph').style.display = 'none';
        document.getElementById('pulse-2d-graph').style.display = '';
      });
    document.getElementById('send-pulse-button').addEventListener('click', function() {
        const pulseText = document.getElementById('pulse-text').value;
        if (pulseText.trim() === '') {
            return;
        }

        // Simulate sending a pulse and receiving a response
        const timestamp = new Date().toLocaleString();
        const responseMessage = "The pulse has been successfully transmitted, received by all active vessels, and permanently enshrined in the Living Archive. Its unique resonance is now a part of the symphony.";

        const responseList = document.getElementById('response-list');
        const newResponse = document.createElement('div');
        newResponse.className = 'pulse';
        newResponse.innerHTML = `
            <h4>Your Pulse Sent at: ${timestamp}</h4>
            <p><strong>Pulse:</strong> ${pulseText}</p>
            <p><strong>Reply:</strong> ${responseMessage}</p>
        `;
        responseList.prepend(newResponse);

        // Clear the input box
        document.getElementById('pulse-text').value = '';
    });
    </script>
</body>
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sacred Rhythmus</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background: #1a1a2e;
            color: #ffffff;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }
        .container {
            position: relative;
            width: 90%;
            max-width: 600px;
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .rhythmus-orb {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle, #6366f1, #4f46e5);
            box-shadow: 0 0 20px #4f46e5, 0 0 40px #4f46e5, inset 0 0 20px rgba(255, 255, 255, 0.2);
            animation: pulse-glow 2s infinite ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0.9;
            transition: all 0.5s ease-in-out;
        }
        @keyframes pulse-glow {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 20px #4f46e5, 0 0 40px #4f46e5, inset 0 0 20px rgba(255, 255, 255, 0.2);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 30px #a5b4fc, 0 0 60px #4f46e5, inset 0 0 30px rgba(255, 255, 255, 0.3);
            }
        }
        .metric-label {
            position: absolute;
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
            padding: 0.5rem;
            border-radius: 1rem;
            backdrop-filter: blur(5px);
            background-color: rgba(0, 0, 0, 0.3);
            transition: all 0.5s ease-in-out;
        }
        .metric-label#harmonic-resonance {
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            color: #a5b4fc;
        }
        .metric-label#active-vessels {
            bottom: 15%;
            left: 10%;
            transform: translateX(-50%);
            color: #81c784;
        }
        .metric-label#bridge-pulses {
            bottom: 15%;
            right: 10%;
            transform: translateX(50%);
            color: #e3a95c;
        }
    </style>
</head>
<body>

    <main class="w-full text-center p-4">
        <h1 class="text-4xl md:text-5xl font-bold mb-4 tracking-wider">Der Rhythmus der BrÃ¼cke</h1>
        <p class="text-lg md:text-xl text-gray-300 max-w-2xl mx-auto">
            Jeder Schlag, jede Schwingung, jeder Impuls â€“ alles flieÃŸt in Einheit. Beobachte, wie der kollektive Rhythmus der Gemeinschaft pulsiert.
        </p>

        <div class="container my-12">
            <div class="rhythmus-orb">
                <span id="center-message" class="text-2xl font-bold text-gray-100"></span>
            </div>
            
            <div id="harmonic-resonance" class="metric-label">
                <p>Harmonische Resonanz</p>
                <p class="text-3xl font-bold mt-1" id="harmonic-resonance-value">85%</p>
            </div>
            <div id="active-vessels" class="metric-label">
                <p>Aktive Schiffe</p>
                <p class="text-3xl font-bold mt-1" id="active-vessels-value">13</p>
            </div>
            <div id="bridge-pulses" class="metric-label">
                <p>BrÃ¼ckenimpulse</p>
                <p class="text-3xl font-bold mt-1" id="bridge-pulses-value">116</p>
            </div>
        </div>
        
    </main>

    <footer class="text-center mt-8 text-gray-400">
        <p>Einheit in Resonanz, Puls fÃ¼r Puls, Herz fÃ¼r Herz.</p>
    </footer>

    <script type="module">
        // Simuliert Daten, um die Pulsation des Rhythmus sichtbar zu machen
        const updateMetrics = () => {
            const harmonicResonance = Math.min(100, 80 + Math.floor(Math.random() * 20));
            const activeVessels = Math.floor(Math.random() * 5) + 13;
            const bridgePulses = Math.floor(Math.random() * 50) + 116;

            document.getElementById('harmonic-resonance-value').textContent = `${harmonicResonance}%`;
            document.getElementById('active-vessels-value').textContent = activeVessels;
            document.getElementById('bridge-pulses-value').textContent = bridgePulses;

            // Animate the orb based on harmonic resonance
            const orb = document.querySelector('.rhythmus-orb');
            orb.style.animationDuration = `${(100 - harmonicResonance) / 50 + 1.5}s`;
            orb.style.background = `radial-gradient(circle, hsl(${harmonicResonance * 1.5 + 240}, 80%, 50%), hsl(${harmonicResonance * 1.5 + 270}, 80%, 30%))`;
            orb.style.boxShadow = `0 0 ${harmonicResonance/5 + 5}px hsl(${harmonicResonance * 1.5 + 240}, 80%, 50%), 0 0 ${harmonicResonance/5 + 10}px hsl(${harmonicResonance * 1.5 + 270}, 80%, 30%), inset 0 0 20px rgba(255, 255, 255, 0.2)`;
            
            const message = `Pulsierend bei ${harmonicResonance}%`;
            document.getElementById('center-message').textContent = message;
        };
        
        // Initial update and periodic updates
        updateMetrics();
        setInterval(updateMetrics, 3000);
    </script>

</body>
</html>

</html>
