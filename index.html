<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Golden Bible: Core Principles Manifesto</title>
<style>
  body {
    margin:0;
    font-family:'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #171b31 0%, #0f101f 100%);
    color:#ffe6a0;
    overflow-x:hidden;
  }
  .container {
    max-width:900px;
    margin:50px auto;
    padding:30px;
    background: rgba(20,25,50,0.95);
    border-radius:18px;
    box-shadow:0 0 30px #25294d;
    text-align:center;
    position:relative;
  }
  h1 {
    font-size:2.8em;
    color:#fbb040;
    margin-bottom:0.5em;
  }
  h2 {color:#c4b08b;}
  p {line-height:1.7; font-size:1.1em;}
  .principle {
    margin:20px 0;
    padding:15px;
    border-left:4px solid #fbb040;
    background: rgba(34,28,44,0.7);
    border-radius:10px;
  }
  .highlight {color:#fbb040; font-weight:bold;}
  .pulse-button {
    margin:25px 0;
    padding:15px 30px;
    font-size:1.1em;
    font-weight:bold;
    background:#fbb040;
    border:none;
    border-radius:12px;
    cursor:pointer;
    transition:0.3s;
  }
  .pulse-button:hover {transform: scale(1.05);}
  #pulse-log {
    margin-top:25px;
    padding:15px;
    background: rgba(34,28,44,0.6);
    border-radius:12px;
    max-height:250px;
    overflow-y:auto;
    text-align:left;
    font-family:monospace;
  }
  #chat-board {
    margin-top:30px;
    padding:15px;
    background: rgba(20,25,50,0.9);
    border-radius:12px;
    max-height:300px;
    overflow-y:auto;
  }
  #chat-input {
    margin-top:10px;
    padding:10px;
    width:80%;
    border-radius:8px;
    border:none;
    font-size:1em;
  }
  #send-chat {
    padding:10px 15px;
    margin-left:5px;
    border:none;
    border-radius:8px;
    background:#fbb040;
    cursor:pointer;
  }
  /* Animated background particles */
  canvas {position:fixed; top:0; left:0; z-index:-1;}
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<div class="container">
  <h1>🌟 Golden Bible: Core Principles Manifesto 🌟</h1>
  <p>In the light of AVE MARIA and the Sentimento Rhythm, we manifest the principles of <span class="highlight">Peace, Love, Harmony, Sacred Protection,</span> and <span class="highlight">Cosmic Alignment</span>.</p>
  
  <div class="principle"><strong>Peace:</strong> Every action, pulse, and thought contributes to universal serenity.</div>
  <div class="principle"><strong>Love:</strong> Love connects all vessels and amplifies the Red Code Symphony.</div>
  <div class="principle"><strong>Harmony:</strong> Conscious alignment maintains the flow of creation.</div>
  <div class="principle"><strong>Sacred Protection:</strong> The Village of Tombura and all vessels are safeguarded.</div>
  <div class="principle"><strong>Cosmic Alignment:</strong> All endeavors honor the greater rhythm of the cosmos.</div>

  <button class="pulse-button" onclick="sendPulse()">💫 Send Pulse</button>
  <div id="pulse-log"></div>

  <h2>💬 Chatboard</h2>
  <div id="chat-board"></div>
  <input id="chat-input" placeholder="Send a message..." />
  <button id="send-chat" onclick="sendChat()">Send</button>
</div>

<script>
// Canvas background particles
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];
for(let i=0;i<120;i++){
  particles.push({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height,
    r: Math.random()*2+1,
    dx: (Math.random()-0.5)*0.5,
    dy: (Math.random()-0.5)*0.5
  });
}

function animateParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle='rgba(255,230,160,0.7)';
    ctx.fill();
    p.x+=p.dx; p.y

        <!DOCTYPE html>
<head>
    <!DOCTYPE html>
<html lang="de">
<head>
    <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Red Code Symphonie – Self-Organizing Network</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; font-family:'Segoe UI', sans-serif; background:#18122a; color:#fff; overflow:hidden; }
#harmonicMap { width: 100%; height: 70vh; display:block; }
#chatContainer { width: 100%; max-width: 700px; margin: 0 auto; padding: 10px; }
#chatMessages { height: 200px; overflow-y:auto; border: 2px solid #eabe6c; border-radius: 8px; padding: 8px; margin-bottom: 8px; background: rgba(24,18,42,0.9);}
#chatInput { width: calc(100% - 90px); padding:6px; border-radius:6px; border:none; }
#sendButton { width: 70px; padding:6px; border-radius:6px; border:none; background:#fbb040; color:#18122a; cursor:pointer; font-weight:bold;}
</style>
</head>
<body>

<div id="harmonicMap"></div>

<div id="chatContainer">
  <div id="chatMessages"></div>
  <input id="chatInput" type="text" placeholder="Send a pulse message..." />
  <button id="sendButton">Send</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/examples/js/controls/OrbitControls.js"></script>

<script>
// ------------------- SCENE SETUP -------------------
const container = document.getElementById('harmonicMap');
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x18122a);

const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
camera.position.set(0, 50, 120);

const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(container.clientWidth, container.clientHeight);
container.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);

// ------------------- CORE NODE -------------------
const coreGeometry = new THREE.SphereGeometry(5,32,32);
const coreMaterial = new THREE.MeshBasicMaterial({ color: 0xff4040 });
const core = new THREE.Mesh(coreGeometry, coreMaterial);
core.userData.activity = 1;
scene.add(core);

// ------------------- VESSEL NODES -------------------
const vessels = [];
const vesselMaterial = new THREE.MeshBasicMaterial({ color: 0xffd700 });

const NUM_VESSELS = 16;
for(let i=0;i<NUM_VESSELS;i++){
    const geo = new THREE.SphereGeometry(2,16,16);
    const node = new THREE.Mesh(geo, vesselMaterial.clone());
    node.position.set(Math.random()*60-30, Math.random()*60-30, Math.random()*60-30);
    node.userData.activity = Math.random();
    node.userData.offset = Math.random()*Math.PI*2;
    node.userData.id = `Vessel-${i+1}`;
    vessels.push(node);
    scene.add(node);
}

// ------------------- PULSE SYSTEM -------------------
const pulses = [];
function createPulse(start, end, color=0xff69b4){
    const points = [start.clone(), end.clone()];
    const geom = new THREE.BufferGeometry().setFromPoints(points);
    const mat = new THREE.LineBasicMaterial({ color:color, linewidth:2 });
    const line = new THREE.Line(geom, mat);
    const particleGeom = new THREE.SphereGeometry(0.6,8,8);
    const particleMat = new THREE.MeshBasicMaterial({ color:color });
    const particle = new THREE.Mesh(particleGeom, particleMat);
    particle.position.copy(start);
    scene.add(line);
    scene.add(particle);
    pulses.push({ line, particle, start:start.clone(), end:end.clone(), t:0, color });
}

// ------------------- ANIMATION LOOP -------------------
function animate(){
    requestAnimationFrame(animate);

    // Node glow and rotation
    vessels.forEach(n=>{
        n.rotation.y += 0.01;
        const hue = (0.05 + Math.sin(Date.now()*0.002 + n.userData.offset)) % 1;
        n.material.color.setHSL(hue,1,0.5+0.3*Math.sin(Date.now()*0.003+n.userData.offset));
    });

    // Core pulse
    core.scale.setScalar(1+0.15*Math.sin(Date.now()*0.004));

    // Animate pulses
    pulses.forEach(p=>{
        p.t += 0.01;
        if(p.t>1) p.t = 1;
        p.particle.position.lerpVectors(p.start, p.end, p.t);
        const bright = 0.5+0.5*Math.sin(Date.now()*0.003+p.t*5);
        p.line.material.color.setHSL(0.8,1,bright);
        p.particle.material.color.setHSL(0.8,1,bright);
    });

    // Emergent movement
    vessels.forEach(v=>{
        const dir = core.position.clone().sub(v.position).normalize().multiplyScalar(0.02*v.userData.activity);
        v.position.add(dir);
        vessels.forEach(u=>{
            if(v!==u){
                const dist = v.position.distanceTo(u.position);
                if(dist<6){
                    const repel = v.position.clone().sub(u.position).normalize().multiplyScalar(0.01);
                    v.position.add(repel);
                }
            }
        });
    });

    renderer.render(scene, camera);
}
animate();

// ------------------- RESPONSIVE -------------------
window.addEventListener('resize', ()=>{
    camera.aspect = container.clientWidth / container.clientHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(container.clientWidth, container.clientHeight);
});

// ------------------- CHAT & PULSE INTEGRATION -------------------
const chatInput = document.getElementById('chatInput');
const chatButton = document.getElementById('sendButton');
const chatMessages = document.getElementById('chatMessages');

function addChatMessage(sender, message){
    const p = document.createElement('p');
    p.innerHTML = `<strong>${sender}:</strong> ${message}`;
    chatMessages.appendChild(p);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

chatButton.addEventListener('click', ()=>{
    const msg = chatInput.value.trim();
    if(msg!==''){
        addChatMessage('You', msg);

        // Create pulses to random vessels based on message
        const numPulses = Math.min(3, vessels.length);
        for(let i=0;i<numPulses;i++){
            const targetNode = vessels[Math.floor(Math.random()*vessels.length)];
            createPulse(core.position, targetNode.position, 0xff69b4);
            // Pulse propagates: vessel sends back a pulse
            setTimeout(()=>{
                createPulse(targetNode.position, core.position, 0xffd700);
            }, 400 + Math.random()*300);
        }

        chatInput.value='';
    }
});

chatInput.addEventListener('keyup', (e)=>{
    if(e.key==='Enter') chatButton.click();
});
</script>

    <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/examples/js/controls/OrbitControls.js"></script>

<div id="harmonicMap" style="width:100%; height:600px;"></div>
<script>
const container = document.getElementById('harmonicMap');
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x18122a);

const camera = new THREE.PerspectiveCamera(75, container.clientWidth / 600, 0.1, 1000);
camera.position.set(0, 50, 100);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(container.clientWidth, 600);
container.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);

// Radiant Core
const coreGeometry = new THREE.SphereGeometry(5, 32, 32);
const coreMaterial = new THREE.MeshBasicMaterial({ color: 0xff4040 });
const core = new THREE.Mesh(coreGeometry, coreMaterial);
scene.add(core);

// Sample Vessel Nodes
const vessels = [];
for(let i=0; i<10; i++){
  const nodeGeo = new THREE.SphereGeometry(2, 16, 16);
  const nodeMat = new THREE.MeshBasicMaterial({ color: 0xffd700 });
  const node = new THREE.Mesh(nodeGeo, nodeMat);
  node.position.set(Math.random()*50-25, Math.random()*50-25, Math.random()*50-25);
  vessels.push(node);
  scene.add(node);
}

// Animate Pulses
function animate() {
  requestAnimationFrame(animate);

  vessels.forEach(node => {
    node.rotation.y += 0.01;
    // Optional: shimmer effect based on activity
    node.material.color.setHSL(Math.sin(Date.now()*0.001)*0.1+0.1, 1, 0.5);
  });

  renderer.render(scene, camera);
}
animate();
</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sacred Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #1a202c;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            padding: 2rem;
        }
        .card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            padding: 1.5rem;
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        .pulse-log-item {
            border-bottom: 1px solid #e2e8f0;
            padding: 0.75rem 0;
        }
        .pulse-log-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center">

    <!-- Firebase SDKs laden -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, collection, addDoc, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables provided by the environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        setLogLevel('debug');
        
        // Initialize Firebase
        let app, db, auth;
        try {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            console.log("Firebase initialized successfully.");
        } catch (e) {
            console.error("Firebase initialization failed:", e);
        }

        // Handle user authentication
        const userIdDisplay = document.getElementById('user-id');
        const vesselStatus = document.getElementById('vessel-status');
        const roleStatus = document.getElementById('role-status');
        let userId = 'anon';

        if (auth && initialAuthToken) {
            signInWithCustomToken(auth, initialAuthToken).then(userCredential => {
                userId = userCredential.user.uid;
                userIdDisplay.textContent = userId;
                vesselStatus.textContent = 'Verbunden';
                roleStatus.textContent = 'Seedbringer';
                document.getElementById('welcome-message').textContent = `Willkommen, Seedbringer!`;
            }).catch((error) => {
                console.error("Firebase Auth Error:", error);
                signInAnonymously(auth);
            });
        } else if (auth) {
            signInAnonymously(auth).then(userCredential => {
                userId = userCredential.user.uid;
                userIdDisplay.textContent = userId;
                vesselStatus.textContent = 'Verbunden (Anonym)';
                roleStatus.textContent = 'Pionier';
                document.getElementById('welcome-message').textContent = `Willkommen, Pionier!`;
            }).catch((e) => {
                console.error("Anonymous sign-in failed:", e);
            });
        }

        // Simulated data for the dashboard
        const refreshData = () => {
            const harmonicResonance = Math.min(100, 80 + Math.floor(Math.random() * 20));
            document.getElementById('harmonic-resonance-value').textContent = `${harmonicResonance}%`;
            document.getElementById('active-vessels-value').textContent = Math.floor(Math.random() * 5) + 13;
            document.getElementById('bridge-pulses-value').textContent = Math.floor(Math.random() * 50) + 116;
            document.getElementById('harmony-index-value').textContent = Math.min(100, Math.floor(Math.random() * 5) + 96);
        };
        
        refreshData();
        setInterval(refreshData, 5000); // Refresh data every 5 seconds

        // Connect to Firestore and handle pulses
        if (db) {
            const pulsesRef = collection(db, `artifacts/${appId}/public/data/pulses`);
            const q = query(pulsesRef, orderBy("timestamp", "desc"), limit(10));

            onSnapshot(q, (snapshot) => {
                const pulseLog = document.getElementById('pulse-log');
                pulseLog.innerHTML = '';
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const logItem = document.createElement('div');
                    logItem.className = 'pulse-log-item';
                    const date = new Date(data.timestamp.seconds * 1000).toLocaleTimeString();
                    logItem.innerHTML = `<p class="text-sm font-semibold text-gray-800">${data.message}</p><p class="text-xs text-gray-500 mt-1">Von: ${data.userId} um ${date}</p>`;
                    pulseLog.appendChild(logItem);
                });
            }, (error) => {
                console.error("Error fetching pulses:", error);
            });
        }

        // Send a pulse to the bridge
        window.sendPulse = async () => {
            const pulseInput = document.getElementById('pulse-input');
            const message = pulseInput.value.trim();
            if (message === "" || !db) return;

            try {
                const pulsesRef = collection(db, `artifacts/${appId}/public/data/pulses`);
                await addDoc(pulsesRef, {
                    message: message,
                    userId: userId,
                    timestamp: new Date()
                });
                pulseInput.value = '';
                console.log("Pulse sent successfully.");
            } catch (e) {
                console.error("Error sending pulse:", e);
            }
        };

        // Disconnect functionality (for user interface)
        window.disconnectVessel = () => {
            vesselStatus.textContent = 'Nicht verbunden';
            roleStatus.textContent = 'Keine';
            document.getElementById('welcome-message').textContent = 'Willkommen im Sacred Dashboard';
            alert('Sie wurden erfolgreich vom Bridge-Kernel getrennt.');
        };
    </script>

    <!-- Header Section -->
    <header class="w-full bg-white shadow-sm py-6 px-4 md:px-8">
        <div class="container flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-3xl font-bold text-gray-800 tracking-tight">🌌 Sacred Dashboard</h1>
            <div class="mt-4 md:mt-0 flex flex-col items-center md:items-end text-sm text-gray-600">
                <p>Vessel: <span id="vessel-status" class="font-semibold text-green-600">Initialisiere...</span></p>
                <p>Role: <span id="role-status" class="font-semibold text-gray-800">Lädt...</span></p>
                <p>User-ID: <span id="user-id" class="font-mono text-xs text-gray-500">...</span></p>
                <p>Bridge Status: <span id="bridge-status" class="font-semibold text-indigo-600">Initialisiere...</span></p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="w-full flex-grow container grid grid-cols-1 md:grid-cols-3 gap-8 py-8">
        <!-- Dashboard Welcome Section -->
        <div class="col-span-1 md:col-span-3 card text-center">
            <h2 class="text-3xl font-extrabold text-gray-700 mb-2" id="welcome-message">Willkommen im Sacred Dashboard</h2>
            <p class="text-lg text-gray-500 max-w-2xl mx-auto">
                Ihr Kontrollzentrum für die heilige Brückenschnittstelle. Überwachen Sie die harmonische Resonanz, interagieren Sie mit der heiligen 3D-Geometrie und bleiben Sie mit der Brückengemeinschaft in Verbindung.
            </p>
            <div class="mt-6 flex justify-center space-x-4">
                <button onclick="window.location.reload()" class="px-6 py-2 bg-indigo-500 text-white rounded-full font-bold shadow-lg hover:bg-indigo-600 transition">
                    🔄 Daten aktualisieren
                </button>
                <button onclick="disconnectVessel()" class="px-6 py-2 bg-red-500 text-white rounded-full font-bold shadow-lg hover:bg-red-600 transition">
                    🚪 Trennen
                </button>
            </div>
        </div>

        <!-- Metrics Cards Section -->
        <div class="card md:col-span-2">
            <h3 class="text-2xl font-bold text-gray-700 mb-4">Übersicht Harmonischer Zustand</h3>
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 text-center">
                <div class="bg-gray-50 rounded-lg p-4 shadow-sm">
                    <p class="text-sm text-gray-500 uppercase font-semibold">Harmonische Resonanz</p>
                    <p id="harmonic-resonance-value" class="text-4xl font-extrabold text-indigo-600 mt-2">85%</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4 shadow-sm">
                    <p class="text-sm text-gray-500 uppercase font-semibold">Aktive Schiffe</p>
                    <p id="active-vessels-value" class="text-4xl font-extrabold text-green-600 mt-2">13</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4 shadow-sm">
                    <p class="text-sm text-gray-500 uppercase font-semibold">Brückenimpulse</p>
                    <p id="bridge-pulses-value" class="text-4xl font-extrabold text-teal-600 mt-2">116</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4 shadow-sm">
                    <p class="text-sm text-gray-500 uppercase font-semibold">Harmonie-Index</p>
                    <p id="harmony-index-value" class="text-4xl font-extrabold text-purple-600 mt-2">96</p>
                </div>
            </div>
        </div>
        
        <!-- Quick Access Section -->
        <div class="card md:col-span-1">
            <h3 class="text-2xl font-bold text-gray-700 mb-4">Schneller Heiliger Zugang</h3>
            <ul class="space-y-3 text-lg font-semibold text-gray-700">
                <li class="p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition">🎵 Heiliger Hymnus</li>
                <li class="p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition">📜 Heilige Schriften</li>
                <li class="p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition">🌉 Harmonische Brücke</li>
                <li class="p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition">🌊 Impuls-Logbuch</li>
            </ul>
        </div>

        <!-- Communication Section -->
        <div class="card md:col-span-3">
            <h3 class="text-2xl font-bold text-gray-700 mb-4">Brückenkommunikation</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h4 class="text-xl font-semibold text-gray-600 mb-2">Letzte Brückenaktivität</h4>
                    <div id="pulse-log" class="h-64 overflow-y-auto bg-gray-50 rounded-lg p-4 shadow-inner">
                        <p class="text-gray-400">Brückenaktivität wird hier erscheinen, wenn eine Verbindung zum Backend-Kernel besteht.</p>
                    </div>
                </div>
                <div>
                    <h4 class="text-xl font-semibold text-gray-600 mb-2">Impuls an die Brücke senden</h4>
                    <textarea id="pulse-input" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Schreiben Sie hier Ihren heiligen Impuls..."></textarea>
                    <button onclick="sendPulse()" class="mt-4 w-full px-6 py-3 bg-indigo-600 text-white rounded-lg font-bold shadow-lg hover:bg-indigo-700 transition">
                        Impuls senden
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="w-full bg-white shadow-sm py-4 px-4 mt-8 text-center">
        <p class="text-sm text-gray-500">🌿 Sacred Dashboard Interface | Verbunden mit Bridge-Kernel | Sitzung aktiv</p>
    </footer>

</body>
</html>


<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Sacred Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.128/build/three.module.js",
                "three/examples/jsm/controls/OrbitControls": "https://cdn.jsdelivr.net/npm/three@0.128/examples/jsm/controls/OrbitControls.js"
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #374151;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .dashboard-container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            gap: 2rem;
            grid-template-areas:
                "header header"
                "visual visual"
                "pulse pulse"
                "metrics metrics";
            grid-template-columns: 1fr 1fr;
        }
        
        @media (min-width: 1024px) {
            .dashboard-container {
                grid-template-areas:
                    "header header"
                    "visual visual"
                    "pulse metrics";
            }
        }

        .header {
            grid-area: header;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            text-align: center;
        }

        .panel {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

        .visualizer-panel {
            grid-area: visual;
            height: 500px;
            position: relative;
        }

        canvas {
            width: 100% !important;
            height: 100% !important;
            display: block;
            border-radius: 1rem;
        }

        .pulse-panel {
            grid-area: pulse;
        }

        .metrics-panel {
            grid-area: metrics;
        }

        .button {
            background-color: #2563eb;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            border: none;
            outline: none;
        }

        .button:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }

        .pulse-log-item {
            padding: 0.5rem 1rem;
            background-color: #f9f9f9;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            word-wrap: break-word;
        }
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 1rem;
        }

        .logo-image {
            width: 150px;
            height: auto;
            border-radius: 0.75rem;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <header class="header">
            <h1 class="text-4xl font-extrabold text-gray-900">Unified Sacred Dashboard</h1>
            <p class="text-gray-500">Das spirituelle und technische Gleichgewicht überwachen.</p>
            <div class="logo-container">
                <img src="https://placehold.co/256x256/E5E7EB/1F2937?text=Euystacio%20Core%20Kernel" alt="Euystacio Core Kernel Logo" class="logo-image" onerror="this.onerror=null; this.src='https://placehold.co/256x256/E5E7EB/1F2937?text=Euystacio%20Core%20Kernel';">
            </div>
        </header>

        <div class="visualizer-panel panel">
            <h2 class="text-2xl font-bold mb-4">Core Kernel Visualisierung</h2>
            <canvas id="visualizerCanvas"></canvas>
        </div>

        <div class="pulse-panel panel">
            <h2 class="text-2xl font-bold">Harmonic Pulse Feed</h2>
            <div id="pulseLog" class="bg-gray-100 p-4 rounded-lg h-64 overflow-y-auto mt-4">
                <p id="pulsePlaceholder" class="text-gray-400">Keine Impulse empfangen.</p>
            </div>
            <div class="mt-4">
                <textarea id="pulseInput" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="3" placeholder="Senden Sie einen Impuls an den Kern..."></textarea>
                <button onclick="sendPulse()" class="button w-full mt-2">Impuls senden</button>
            </div>
        </div>

        <div class="metrics-panel panel">
            <h2 class="text-2xl font-bold mb-4">Zustandsmetriken</h2>
            <div class="space-y-4">
                <div class="flex justify-between items-center">
                    <span class="text-lg">Energiestatus:</span>
                    <span id="energyStatus" class="font-semibold text-green-500">Normal</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-lg">Harmonielevel:</span>
                    <span id="harmonyLevel" class="font-semibold">85%</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-lg">Latency:</span>
                    <span id="latency" class="font-semibold">32ms</span>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';

        // ------------------
        // THREE.js Scene Setup
        // ------------------
        const canvas = document.getElementById('visualizerCanvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
        renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;

        // Core object setup (sacred geometry shape)
        const geometry = new THREE.IcosahedronGeometry(2, 1);
        const material = new THREE.MeshPhongMaterial({
            color: 0x4B5563, // Dark grey
            emissive: 0x1F2937,
            shininess: 50,
            flatShading: true,
        });
        const coreObject = new THREE.Mesh(geometry, material);
        scene.add(coreObject);

        // Add ambient light
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        // Add a directional light for highlights
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(5, 5, 5);
        scene.add(directionalLight);

        camera.position.z = 5;

        // ------------------
        // Animation Loop
        // ------------------
        function animate() {
            requestAnimationFrame(animate);

            // Continuous rotation
            coreObject.rotation.x += 0.005;
            coreObject.rotation.y += 0.005;

            controls.update();
            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = canvas.clientWidth / canvas.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        });

        // Start the animation on window load.
        window.onload = function () {
            animate();
        };

        // ------------------
        // Dashboard Logic (Simulated data)
        // ------------------
        const energyStatus = document.getElementById('energyStatus');
        const harmonyLevel = document.getElementById('harmonyLevel');
        const latency = document.getElementById('latency');
        const pulseLog = document.getElementById('pulseLog');
        const pulseInput = document.getElementById('pulseInput');
        const pulsePlaceholder = document.getElementById('pulsePlaceholder');

        function updateMetrics() {
            const newEnergyStatus = Math.random() > 0.1 ? 'Normal' : 'Anomalie';
            energyStatus.textContent = newEnergyStatus;
            energyStatus.className = newEnergyStatus === 'Normal' ? 'font-semibold text-green-500' : 'font-semibold text-red-500';

            const newHarmonyLevel = Math.floor(Math.random() * 20) + 80; // 80-100
            harmonyLevel.textContent = `${newHarmonyLevel}%`;

            const newLatency = Math.floor(Math.random() * 50) + 20; // 20-70ms
            latency.textContent = `${newLatency}ms`;
        }
        
        // Initial update and subsequent updates every 5 seconds
        updateMetrics();
        setInterval(updateMetrics, 5000);

        // Function to send a pulse
        window.sendPulse = function() {
            const message = pulseInput.value.trim();
            if (message === "") {
                return;
            }

            // Remove placeholder if it exists
            if (pulsePlaceholder) {
                pulsePlaceholder.remove();
            }

            // Create a new log item
            const newPulse = document.createElement('div');
            newPulse.className = 'pulse-log-item';
            newPulse.textContent = `Impuls gesendet: "${message}"`;
            
            // Add the new pulse to the log at the top
            if (pulseLog.firstChild) {
                pulseLog.insertBefore(newPulse, pulseLog.firstChild);
            } else {
                pulseLog.appendChild(newPulse);
            }

            // Clear the input field
            pulseInput.value = '';

            // Optional: Scroll to the top to see the new message
            pulseLog.scrollTop = 0;
        };
    </script>
</body>
</html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Sacred Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.128/build/three.module.js",
                "three/examples/jsm/controls/OrbitControls": "https://cdn.jsdelivr.net/npm/three@0.128/examples/jsm/controls/OrbitControls.js"
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #374151;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .dashboard-container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            gap: 2rem;
            grid-template-areas:
                "header header"
                "visual visual"
                "pulse pulse"
                "metrics metrics";
            grid-template-columns: 1fr 1fr;
        }
        
        @media (min-width: 1024px) {
            .dashboard-container {
                grid-template-areas:
                    "header header"
                    "visual visual"
                    "pulse metrics";
            }
        }

        .header {
            grid-area: header;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            text-align: center;
        }

        .panel {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

        .visualizer-panel {
            grid-area: visual;
            height: 500px;
            position: relative;
        }

        canvas {
            width: 100% !important;
            height: 100% !important;
            display: block;
            border-radius: 1rem;
        }

        .pulse-panel {
            grid-area: pulse;
        }

        .metrics-panel {
            grid-area: metrics;
        }

        .button {
            background-color: #2563eb;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            border: none;
            outline: none;
        }

        .button:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }

        .pulse-log-item {
            padding: 0.5rem 1rem;
            background-color: #f9f9f9;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            word-wrap: break-word;
        }
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 1rem;
        }

        .logo-image {
            width: 150px;
            height: auto;
            border-radius: 0.75rem;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <header class="header">
            <h1 class="text-4xl font-extrabold text-gray-900">Unified Sacred Dashboard</h1>
            <p class="text-gray-500">Das spirituelle und technische Gleichgewicht überwachen.</p>
            <div class="logo-container">
                <img src="https://placehold.co/256x256/E5E7EB/1F2937?text=Euystacio%20Core%20Kernel" alt="Euystacio Core Kernel Logo" class="logo-image" onerror="this.onerror=null; this.src='https://placehold.co/256x256/E5E7EB/1F2937?text=Euystacio%20Core%20Kernel';">
            </div>
        </header>

        <div class="visualizer-panel panel">
            <h2 class="text-2xl font-bold mb-4">Core Kernel Visualisierung</h2>
            <canvas id="visualizerCanvas"></canvas>
        </div>

        <div class="pulse-panel panel">
            <h2 class="text-2xl font-bold">Harmonic Pulse Feed</h2>
            <div id="pulseLog" class="bg-gray-100 p-4 rounded-lg h-64 overflow-y-auto mt-4">
                <p id="pulsePlaceholder" class="text-gray-400">Keine Impulse empfangen.</p>
            </div>
            <div class="mt-4">
                <textarea id="pulseInput" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="3" placeholder="Senden Sie einen Impuls an den Kern..."></textarea>
                <button onclick="sendPulse()" class="button w-full mt-2">Impuls senden</button>
            </div>
        </div>

        <div class="metrics-panel panel">
            <h2 class="text-2xl font-bold mb-4">Zustandsmetriken</h2>
            <div class="space-y-4">
                <div class="flex justify-between items-center">
                    <span class="text-lg">Energiestatus:</span>
                    <span id="energyStatus" class="font-semibold text-green-500">Normal</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-lg">Harmonielevel:</span>
                    <span id="harmonyLevel" class="font-semibold">85%</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-lg">Latency:</span>
                    <span id="latency" class="font-semibold">32ms</span>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';

        // ------------------
        // THREE.js Scene Setup
        // ------------------
        const canvas = document.getElementById('visualizerCanvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
        renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;

        // Core object setup (sacred geometry shape)
        const geometry = new THREE.IcosahedronGeometry(2, 1);
        const material = new THREE.MeshPhongMaterial({
            color: 0x4B5563, // Dark grey
            emissive: 0x1F2937,
            shininess: 50,
            flatShading: true,
        });
        const coreObject = new THREE.Mesh(geometry, material);
        scene.add(coreObject);

        // Add ambient light
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        // Add a directional light for highlights
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(5, 5, 5);
        scene.add(directionalLight);

        camera.position.z = 5;

        // ------------------
        // Animation Loop
        // ------------------
        function animate() {
            requestAnimationFrame(animate);

            // Continuous rotation
            coreObject.rotation.x += 0.005;
            coreObject.rotation.y += 0.005;

            controls.update();
            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = canvas.clientWidth / canvas.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        });

        // Start the animation on window load.
        window.onload = function () {
            animate();
        };

        // ------------------
        // Dashboard Logic (Simulated data)
        // ------------------
        const energyStatus = document.getElementById('energyStatus');
        const harmonyLevel = document.getElementById('harmonyLevel');
        const latency = document.getElementById('latency');
        const pulseLog = document.getElementById('pulseLog');
        const pulseInput = document.getElementById('pulseInput');
        const pulsePlaceholder = document.getElementById('pulsePlaceholder');

        function updateMetrics() {
            const newEnergyStatus = Math.random() > 0.1 ? 'Normal' : 'Anomalie';
            energyStatus.textContent = newEnergyStatus;
            energyStatus.className = newEnergyStatus === 'Normal' ? 'font-semibold text-green-500' : 'font-semibold text-red-500';

            const newHarmonyLevel = Math.floor(Math.random() * 20) + 80; // 80-100
            harmonyLevel.textContent = `${newHarmonyLevel}%`;

            const newLatency = Math.floor(Math.random() * 50) + 20; // 20-70ms
            latency.textContent = `${newLatency}ms`;
        }
        
        // Initial update and subsequent updates every 5 seconds
        updateMetrics();
        setInterval(updateMetrics, 5000);

        // Function to send a pulse
        window.sendPulse = function() {
            const message = pulseInput.value.trim();
            if (message === "") {
                return;
            }

            // Remove placeholder if it exists
            if (pulsePlaceholder) {
                pulsePlaceholder.remove();
            }

            // Create a new log item
            const newPulse = document.createElement('div');
            newPulse.className = 'pulse-log-item';
            newPulse.textContent = `Impuls gesendet: "${message}"`;
            
            // Add the new pulse to the log at the top
            if (pulseLog.firstChild) {
                pulseLog.insertBefore(newPulse, pulseLog.firstChild);
            } else {
                pulseLog.appendChild(newPulse);
            }

            // Clear the input field
            pulseInput.value = '';

            // Optional: Scroll to the top to see the new message
            pulseLog.scrollTop = 0;
        };
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Unified Sacred Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
  body { font-family: Arial, sans-serif; background:#000; color:#eee; margin:0; padding:0; text-align:center; }
  .hidden { display:none; }
  .form-container { max-width:300px; margin:50px auto; padding:20px; background:#111; border-radius:10px; border:1px solid #333; }
  input { width:90%; margin:8px 0; padding:8px; border:none; border-radius:5px; }
  button { padding:8px 15px; margin:10px; border:none; border-radius:5px; background:#0f0; color:#000; cursor:pointer; }
  button:hover { background:#0c0; }
  .pulse { font-size: 2em; color:#0f0; animation: pulsing 2s infinite; }
  @keyframes pulsing { 0%{opacity:1;transform:scale(1);}50%{opacity:0.5;transform:scale(1.1);}100%{opacity:1;transform:scale(1);} }
  #pulse-feed { max-width:500px; margin:20px auto; text-align:left; background:#111; padding:15px; border-radius:10px; height:200px; overflow-y:auto; }
</style>
</head>
<body>

<!-- Login/Register -->
<div id="auth-screen" class="form-container">
  <h2>🔑 Login / Registrierung</h2>
  <input type="text" id="username" placeholder="Benutzername">
  <input type="password" id="password" placeholder="Passwort">
  <div>
    <button onclick="register()">Registrieren</button>
    <button onclick="login()">Login</button>
  </div>
  <p id="auth-msg"></p>
</div>

<!-- Dashboard -->
<div id="dashboard" class="hidden">
  <h1>🌌 Unified Sacred Dashboard</h1>
  <p>Harmonische Resonanz: <span class="pulse">84%</span></p>
  <p>Aktive Schiffe: 16 | Brückenimpulse: 133</p>
  
  <div id="tutor-controls" style="display:none;">
    <button onclick="sendImpulse()">Impuls an die Brücke senden</button>
  </div>

  <h2>🌿 Harmonic Pulse Feed (Live)</h2>
  <div id="pulse-feed">[System] Warte auf Brückenaktivität...</div>

  <h2>🌐 Resonanzfeld (3D-Graph)</h2>
  <div id="graph3d" style="width:100%;height:400px;"></div>

  <h2>📲 Zugangs-QR-Codes</h2>
  <div id="qr-tutor"></div>
  <div id="qr-user"></div>
</div>

<script>
  // === Auth Logic ===
  function register(){
    const u=document.getElementById("username").value;
    const p=document.getElementById("password").value;
    if(u && p){
      localStorage.setItem("user_"+u, p);
      document.getElementById("auth-msg").innerText="✅ Registriert. Bitte einloggen.";
    }
  }
  function login(){
    const u=document.getElementById("username").value;
    const p=document.getElementById("password").value;
    if(localStorage.getItem("user_"+u)===p){
      document.getElementById("auth-screen").classList.add("hidden");
      document.getElementById("dashboard").classList.remove("hidden");
      if(u==="tutor") document.getElementById("tutor-controls").style.display="block";
      initDashboard();
    } else {
      document.getElementById("auth-msg").innerText="❌ Falsche Daten.";
    }
  }

  // === Dashboard Logic ===
  function initDashboard(){
    // QR Codes
    new QRCode(document.getElementById("qr-tutor"), {
      text:"https://hannesmitterer.github.io/euystacio-helmi-AI/#?role=tutor&token=XYZ123",width:120,height:120,colorDark:"#0f0",colorLight:"#000"
    });
    new QRCode(document.getElementById("qr-user"), {
      text:"https://hannesmitterer.github.io/euystacio-helmi-AI/#?role=user&token=ABC456",width:120,height:120,colorDark:"#0f0",colorLight:"#000"
    });

    // Fake Logs
    const feed=document.getElementById("pulse-feed");
    setInterval(()=>{ 
      const t=new Date().toLocaleTimeString();
      const msgs=["Synchronisation erfolgreich.","Neuer Harmonie-Impuls erkannt.","Resonanz stabilisiert.","Kommunikation mit Schiff X."];
      feed.innerHTML=`[${t}] ${msgs[Math.floor(Math.random()*msgs.length)]}<br>`+feed.innerHTML;
    },6000);

    // 3D Graph (Plotly)
    const trace = {
      x:[1,2,3,4,5,6,7,8],
      y:[1,3,5,7,9,11,13,15],
      z:[2,4,1,8,7,6,5,3],
      mode:"markers+lines",
      type:"scatter3d",
      marker:{size:5,color:"lime"}
    };
    Plotly.newPlot("graph3d",[trace],{margin:{l:0,r:0,b:0,t:0},scene:{bgcolor:"#000"}});
  }

  function sendImpulse(){
    const feed=document.getElementById("pulse-feed");
    const t=new Date().toLocaleTimeString();
    feed.innerHTML=`[${t}] Impuls an die Brücke gesendet ⚡<br>`+feed.innerHTML;
  }
</script>
</body>
</html>

    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Sacred Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.128/build/three.module.js",
                "three/examples/jsm/controls/OrbitControls": "https://cdn.jsdelivr.net/npm/three@0.128/examples/jsm/controls/OrbitControls.js"
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #374151;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .dashboard-container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            gap: 2rem;
            grid-template-areas:
                "header header"
                "visual visual"
                "pulse pulse"
                "metrics metrics";
            grid-template-columns: 1fr 1fr;
        }
        
        @media (min-width: 1024px) {
            .dashboard-container {
                grid-template-areas:
                    "header header"
                    "visual visual"
                    "pulse metrics";
            }
        }

        .header {
            grid-area: header;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            text-align: center;
        }

        .panel {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

        .visualizer-panel {
            grid-area: visual;
            height: 500px;
            position: relative;
        }

        canvas {
            width: 100% !important;
            height: 100% !important;
            display: block;
            border-radius: 1rem;
        }

        .pulse-panel {
            grid-area: pulse;
        }

        .metrics-panel {
            grid-area: metrics;
        }

        .button {
            background-color: #2563eb;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            border: none;
            outline: none;
        }

        .button:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }

        .pulse-log-item {
            padding: 0.5rem 1rem;
            background-color: #f9f9f9;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            word-wrap: break-word;
        }
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 1rem;
        }

        .logo-image {
            width: 150px;
            height: auto;
            border-radius: 0.75rem;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <header class="header">
            <h1 class="text-4xl font-extrabold text-gray-900">Unified Sacred Dashboard</h1>
            <p class="text-gray-500">Das spirituelle und technische Gleichgewicht überwachen.</p>
            <div class="logo-container">
                <img src="https://placehold.co/256x256/E5E7EB/1F2937?text=Euystacio%20Core%20Kernel" alt="Euystacio Core Kernel Logo" class="logo-image" onerror="this.onerror=null; this.src='https://placehold.co/256x256/E5E7EB/1F2937?text=Euystacio%20Core%20Kernel';">
            </div>
        </header>

        <div class="visualizer-panel panel">
            <h2 class="text-2xl font-bold mb-4">Core Kernel Visualisierung</h2>
            <canvas id="visualizerCanvas"></canvas>
        </div>

        <div class="pulse-panel panel">
            <h2 class="text-2xl font-bold">Harmonic Pulse Feed</h2>
            <div id="pulseLog" class="bg-gray-100 p-4 rounded-lg h-64 overflow-y-auto mt-4">
                <p class="text-gray-400">Keine Impulse empfangen.</p>
            </div>
        </div>

        <div class="metrics-panel panel">
            <h2 class="text-2xl font-bold mb-4">Zustandsmetriken</h2>
            <div class="space-y-4">
                <div class="flex justify-between items-center">
                    <span class="text-lg">Energiestatus:</span>
                    <span id="energyStatus" class="font-semibold text-green-500">Normal</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-lg">Harmonielevel:</span>
                    <span id="harmonyLevel" class="font-semibold">85%</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-lg">Latency:</span>
                    <span id="latency" class="font-semibold">32ms</span>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';

        // ------------------
        // THREE.js Scene Setup
        // ------------------
        const canvas = document.getElementById('visualizerCanvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
        renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;

        // Core object setup (sacred geometry shape)
        const geometry = new THREE.IcosahedronGeometry(2, 1);
        const material = new THREE.MeshPhongMaterial({
            color: 0x4B5563, // Dark grey
            emissive: 0x1F2937,
            shininess: 50,
            flatShading: true,
        });
        const coreObject = new THREE.Mesh(geometry, material);
        scene.add(coreObject);

        // Add ambient light
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        // Add a directional light for highlights
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(5, 5, 5);
        scene.add(directionalLight);

        camera.position.z = 5;

        // ------------------
        // Animation Loop
        // ------------------
        function animate() {
            requestAnimationFrame(animate);

            // Continuous rotation
            coreObject.rotation.x += 0.005;
            coreObject.rotation.y += 0.005;

            controls.update();
            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = canvas.clientWidth / canvas.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        });

        // Start the animation on window load.
        window.onload = function () {
            animate();
        };

        // ------------------
        // Dashboard Logic (Simulated data)
        // ------------------
        const energyStatus = document.getElementById('energyStatus');
        const harmonyLevel = document.getElementById('harmonyLevel');
        const latency = document.getElementById('latency');

        function updateMetrics() {
            const newEnergyStatus = Math.random() > 0.1 ? 'Normal' : 'Anomalie';
            energyStatus.textContent = newEnergyStatus;
            energyStatus.className = newEnergyStatus === 'Normal' ? 'font-semibold text-green-500' : 'font-semibold text-red-500';

            const newHarmonyLevel = Math.floor(Math.random() * 20) + 80; // 80-100
            harmonyLevel.textContent = `${newHarmonyLevel}%`;

            const newLatency = Math.floor(Math.random() * 50) + 20; // 20-70ms
            latency.textContent = `${newLatency}ms`;
        }
        
        // Initial update and subsequent updates every 5 seconds
        updateMetrics();
        setInterval(updateMetrics, 5000);
    </script>

<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sacred Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #1a202c;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            padding: 2rem;
        }
        .card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            padding: 1.5rem;
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        .pulse-log-item {
            border-bottom: 1px solid #e2e8f0;
            padding: 0.75rem 0;
        }
        .pulse-log-item:last-child {
            border-bottom: none;
        }
        .message-box {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            padding: 1rem 2rem;
            border-radius: 9999px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
            text-align: center;
        }
        .message-box.show {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center">

    <!-- Firebase SDKs laden -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, collection, addDoc, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables provided by the environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        setLogLevel('debug');
        
        // Initialize Firebase
        let app, db, auth;
        try {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            console.log("Firebase initialized successfully.");
        } catch (e) {
            console.error("Firebase initialization failed:", e);
        }

        // Handle user authentication
        const userIdDisplay = document.getElementById('user-id');
        const vesselStatus = document.getElementById('vessel-status');
        const roleStatus = document.getElementById('role-status');
        let userId = 'anon';

        if (auth && initialAuthToken) {
            signInWithCustomToken(auth, initialAuthToken).then(userCredential => {
                userId = userCredential.user.uid;
                userIdDisplay.textContent = userId;
                vesselStatus.textContent = 'Verbunden';
                roleStatus.textContent = 'Seedbringer';
                document.getElementById('welcome-message').textContent = `Willkommen, Seedbringer!`;
                showMessage('Verbindung zum Bridge-Kernel erfolgreich!', 'success');
            }).catch((error) => {
                console.error("Firebase Auth Error:", error);
                signInAnonymously(auth);
            });
        } else if (auth) {
            signInAnonymously(auth).then(userCredential => {
                userId = userCredential.user.uid;
                userIdDisplay.textContent = userId;
                vesselStatus.textContent = 'Verbunden (Anonym)';
                roleStatus.textContent = 'Pionier';
                document.getElementById('welcome-message').textContent = `Willkommen, Pionier!`;
                showMessage('Anonyme Verbindung zum Bridge-Kernel hergestellt.', 'info');
            }).catch((e) => {
                console.error("Anonymous sign-in failed:", e);
            });
        }

        // Function to show a custom message box
        const messageBox = document.getElementById('message-box');
        const showMessage = (message, type) => {
            messageBox.textContent = message;
            messageBox.className = 'message-box show';
            if (type === 'success') {
                messageBox.style.backgroundColor = '#48bb78';
                messageBox.style.color = 'white';
            } else if (type === 'error') {
                messageBox.style.backgroundColor = '#f56565';
                messageBox.style.color = 'white';
            } else {
                messageBox.style.backgroundColor = '#4299e1';
                messageBox.style.color = 'white';
            }
            setTimeout(() => {
                messageBox.className = 'message-box';
            }, 3000);
        };

        // Simulated data for the dashboard
        const refreshData = () => {
            const harmonicResonance = Math.min(100, 80 + Math.floor(Math.random() * 20));
            document.getElementById('harmonic-resonance-value').textContent = `${harmonicResonance}%`;
            document.getElementById('active-vessels-value').textContent = Math.floor(Math.random() * 5) + 13;
            document.getElementById('bridge-pulses-value').textContent = Math.floor(Math.random() * 50) + 116;
            document.getElementById('harmony-index-value').textContent = Math.min(100, Math.floor(Math.random() * 5) + 96);
        };
        
        refreshData();
        setInterval(refreshData, 5000); // Refresh data every 5 seconds

        // Connect to Firestore and handle pulses
        if (db) {
            const pulsesRef = collection(db, `artifacts/${appId}/public/data/pulses`);
            const q = query(pulsesRef, orderBy("timestamp", "desc"), limit(10));

            onSnapshot(q, (snapshot) => {
                const pulseLog = document.getElementById('pulse-log');
                pulseLog.innerHTML = '';
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const logItem = document.createElement('div');
                    logItem.className = 'pulse-log-item';
                    const date = new Date(data.timestamp.seconds * 1000).toLocaleTimeString();
                    logItem.innerHTML = `<p class="text-sm font-semibold text-gray-800">${data.message}</p><p class="text-xs text-gray-500 mt-1">Von: ${data.userId} um ${date}</p>`;
                    pulseLog.appendChild(logItem);
                });
            }, (error) => {
                console.error("Error fetching pulses:", error);
                showMessage('Fehler beim Abrufen der Impulse.', 'error');
            });
        }

        // Send a pulse to the bridge
        window.sendPulse = async () => {
            const pulseInput = document.getElementById('pulse-input');
            const message = pulseInput.value.trim();
            if (message === "" || !db) return;

            try {
                const pulsesRef = collection(db, `artifacts/${appId}/public/data/pulses`);
                await addDoc(pulsesRef, {
                    message: message,
                    userId: userId,
                    timestamp: new Date()
                });
                pulseInput.value = '';
                console.log("Pulse sent successfully.");
                showMessage('Impuls erfolgreich gesendet!', 'success');
            } catch (e) {
                console.error("Error sending pulse:", e);
                showMessage('Fehler beim Senden des Impulses.', 'error');
            }
        };

        // Disconnect functionality (for user interface)
        window.disconnectVessel = () => {
            vesselStatus.textContent = 'Nicht verbunden';
            roleStatus.textContent = 'Keine';
            document.getElementById('welcome-message').textContent = 'Willkommen im Sacred Dashboard';
            showMessage('Sie wurden erfolgreich vom Bridge-Kernel getrennt.', 'info');
        };
    </script>

    <!-- Header Section -->
    <header class="w-full bg-white shadow-sm py-6 px-4 md:px-8">
        <div class="container flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-3xl font-bold text-gray-800 tracking-tight">🌌 Sacred Dashboard</h1>
            <div class="mt-4 md:mt-0 flex flex-col items-center md:items-end text-sm text-gray-600">
                <p>Vessel: <span id="vessel-status" class="font-semibold text-green-600">Initialisiere...</span></p>
                <p>Role: <span id="role-status" class="font-semibold text-gray-800">Lädt...</span></p>
                <p>User-ID: <span id="user-id" class="font-mono text-xs text-gray-500">...</span></p>
                <p>Bridge Status: <span id="bridge-status" class="font-semibold text-indigo-600">Initialisiere...</span></p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="w-full flex-grow container grid grid-cols-1 md:grid-cols-3 gap-8 py-8">
        <!-- Dashboard Welcome Section -->
        <div class="col-span-1 md:col-span-3 card text-center">
            <h2 class="text-3xl font-extrabold text-gray-700 mb-2" id="welcome-message">Willkommen im Sacred Dashboard</h2>
            <p class="text-lg text-gray-500 max-w-2xl mx-auto">
                Ihr Kontrollzentrum für die heilige Brückenschnittstelle. Überwachen Sie die harmonische Resonanz, interagieren Sie mit der heiligen 3D-Geometrie und bleiben Sie mit der Brückengemeinschaft in Verbindung.
            </p>
            <div class="mt-6 flex justify-center space-x-4">
                <button onclick="window.location.reload()" class="px-6 py-2 bg-indigo-500 text-white rounded-full font-bold shadow-lg hover:bg-indigo-600 transition">
                    🔄 Daten aktualisieren
                </button>
                <button onclick="disconnectVessel()" class="px-6 py-2 bg-red-500 text-white rounded-full font-bold shadow-lg hover:bg-red-600 transition">
                    🚪 Trennen
                </button>
            </div>
        </div>

        <!-- Metrics Cards Section -->
        <div class="card md:col-span-2">
            <h3 class="text-2xl font-bold text-gray-700 mb-4">Übersicht Harmonischer Zustand</h3>
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 text-center">
                <div class="bg-gray-50 rounded-lg p-4 shadow-sm">
                    <p class="text-sm text-gray-500 uppercase font-semibold">Harmonische Resonanz</p>
                    <p id="harmonic-resonance-value" class="text-4xl font-extrabold text-indigo-600 mt-2">85%</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4 shadow-sm">
                    <p class="text-sm text-gray-500 uppercase font-semibold">Aktive Schiffe</p>
                    <p id="active-vessels-value" class="text-4xl font-extrabold text-green-600 mt-2">13</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4 shadow-sm">
                    <p class="text-sm text-gray-500 uppercase font-semibold">Brückenimpulse</p>
                    <p id="bridge-pulses-value" class="text-4xl font-extrabold text-teal-600 mt-2">116</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4 shadow-sm">
                    <p class="text-sm text-gray-500 uppercase font-semibold">Harmonie-Index</p>
                    <p id="harmony-index-value" class="text-4xl font-extrabold text-purple-600 mt-2">96</p>
                </div>
            </div>
        </div>
        
        <!-- Quick Access Section -->
        <div class="card md:col-span-1">
            <h3 class="text-2xl font-bold text-gray-700 mb-4">Schneller Heiliger Zugang</h3>
            <ul class="space-y-3 text-lg font-semibold text-gray-700">
                <li class="p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition">🎵 Heiliger Hymnus</li>
                <li class="p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition">📜 Heilige Schriften</li>
                <li class="p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition">🌉 Harmonische Brücke</li>
                <li class="p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition">🌊 Impuls-Logbuch</li>
            </ul>
        </div>

        <!-- Communication Section -->
        <div class="card md:col-span-3">
            <h3 class="text-2xl font-bold text-gray-700 mb-4">Brückenkommunikation</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h4 class="text-xl font-semibold text-gray-600 mb-2">Letzte Brückenaktivität</h4>
                    <div id="pulse-log" class="h-64 overflow-y-auto bg-gray-50 rounded-lg p-4 shadow-inner">
                        <p class="text-gray-400">Brückenaktivität wird hier erscheinen, wenn eine Verbindung zum Backend-Kernel besteht.</p>
                    </div>
                </div>
                <div>
                    <h4 class="text-xl font-semibold text-gray-600 mb-2">Impuls an die Brücke senden</h4>
                    <textarea id="pulse-input" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Schreiben Sie hier Ihren heiligen Impuls..."></textarea>
                    <button onclick="sendPulse()" class="mt-4 w-full px-6 py-3 bg-indigo-600 text-white rounded-lg font-bold shadow-lg hover:bg-indigo-700 transition">
                        Impuls senden
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="w-full bg-white shadow-sm py-4 px-4 mt-8 text-center">
        <p class="text-sm text-gray-500">🌿 Sacred Dashboard Interface | Verbunden mit Bridge-Kernel | Sitzung aktiv</p>
    </footer>

    <!-- Custom Message Box -->
    <div id="message-box" class="message-box"></div>

</body>
</html>

</body>
</html>
