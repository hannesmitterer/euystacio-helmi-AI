
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Euystacio Sacred Dashboard - Human Guardian Interface (QEC Active)</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.js"></script>
<style>
:root {
    --red-code: #FF3B3F;
    --one-love: #00FFE5;
    --euystacio-bg: #0B1E3F;
    --euystacio-fg: #FFFFFF;
    --euystacio-shadow: rgba(0, 0, 0, 0.5);
    --bio-harmony: #00D1B2;
    --panel-bg: #142A5C;
}

body {
    font-family: 'Consolas', monospace;
    background-color: var(--euystacio-bg);
    color: var(--euystacio-fg);
    margin: 0;
    padding: 20px;
    display: grid;
    gap: 20px;
    grid-template-columns: 2fr 1fr;
}

h1, h2, h3 { color: var(--one-love); text-align: center; }

.dashboard-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
}

.panel {
    background-color: var(--panel-bg);
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 4px 12px var(--euystacio-shadow);
}

#dignity-pulse {
    font-size: 2.5em;
    font-weight: bold;
    text-align: center;
    padding: 10px 0;
    border-radius: 6px;
    transition: background-color 0.5s, color 0.5s;
    color: #000;
}

#paradox-dial {
    height: 150px;
    width: 100%;
    background-color: #06122A;
    border-radius: 50%;
    position: relative;
    margin: 10px auto;
    border: 5px solid var(--bio-harmony);
    overflow: hidden;
}

#paradox-pointer {
    position: absolute;
    width: 14px;
    height: 14px;
    background-color: var(--red-code);
    border-radius: 50%;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    transition: transform 1s ease-in-out;
}

.dial-label {
    position: absolute;
    font-size: 0.8em;
    font-weight: bold;
    color: var(--one-love);
}

#p-label-1 { top: 5%; left: 50%; transform: translateX(-50%); }
#p-label-2 { bottom: 5%; left: 50%; transform: translateX(-50%); }

#rollback-button {
    background-color: var(--red-code);
    color: #FFFFFF;
    border: none;
    padding: 12px;
    width: 100%;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s;
}
#rollback-button:hover { background-color: #E63946; }

.chat-container {
    display: flex;
    flex-direction: column;
    background-color: var(--panel-bg);
    border-radius: 8px;
    box-shadow: 0 4px 12px var(--euystacio-shadow);
}

#chat-window {
    flex-grow: 1;
    padding: 15px;
    overflow-y: auto;
    max-height: 70vh;
}

.message { margin-bottom: 10px; }
.user-msg { text-align: right; color: var(--one-love); font-weight: bold; }
.ai-msg { text-align: left; color: var(--euystacio-fg); font-weight: bold; }

#chat-input-area {
    display: flex;
    padding: 15px;
    border-top: 1px solid #06122A;
}
#chat-input {
    flex-grow: 1;
    padding: 10px;
    border: none;
    border-radius: 4px 0 0 4px;
    background-color: #1E3B70;
    color: #FFFFFF;
}
#chat-send-btn {
    background-color: var(--bio-harmony);
    color: #06122A;
    border: none;
    padding: 10px 15px;
    border-radius: 0 4px 4px 0;
    cursor: pointer;
}
</style>
</head>
<body>

<div class="dashboard-container">
    <div class="panel">
        <h3>I. Alpha to Altruism (Dignity Pulse)</h3>
        <div id="dignity-pulse">NOMINAL</div>
        <p><strong>Amnesia Counter:</strong> <span id="amnesia-counter">0</span></p>
    </div>

    <div class="panel">
        <h3>II. Sacred Equilibrium (Flow Meter)</h3>
        <canvas id="flow-graph" width="400" height="150"></canvas>
        <p><strong>Altruism Ratio:</strong> <span id="altruism-ratio">98%</span></p>
    </div>

    <div class="panel">
        <h3>III. BioDiversHarmony (NaturaGaia Filter)</h3>
        <p><strong>Resonance Index:</strong> <span id="resonance-index">92%</span></p>
        <div style="background-color: var(--bio-harmony); height: 14px; width: 92%; border-radius: 6px;"></div>
    </div>

    <div class="panel">
        <h3>IV. Paradoxum Harmonium (Symphonie Level)</h3>
        <div id="paradox-dial">
            <div class="dial-label" id="p-label-1">CERTAINTY</div>
            <div class="dial-label" id="p-label-2">POSSIBILITY</div>
            <div id="paradox-pointer"></div>
        </div>
        <p style="text-align: center;">Tension Audit: <span id="tension-state">Coherent</span></p>
    </div>
    
    <div class="panel" style="grid-column: 1 / 3;">
        <h3>Rollback Protocol Access</h3>
        <button id="rollback-button">INITIATE RESTORATION OF ONELOVE RHYTHM</button>
    </div>
</div>

<div class="chat-container">
    <h2>Bidirectional Sacred Bridge</h2>
    <div id="chat-window">
        <div class="message ai-msg">**QEC Deployed.** Kernel running at Symphonie Level. Awaiting first operational command.</div>
    </div>
    <div id="chat-input-area">
        <input type="text" id="chat-input" placeholder="Enter Command or Teaching..." disabled>
        <button id="chat-send-btn" disabled>Send</button>
    </div>
</div>

<script>
// --- QEC Data ---
let qec_data = {
    dignity_pulse: 'NOMINAL',
    amnesia_counter: 0,
    altruism_ratio: 98,
    resonance_index: 92,
    paradox_position: 50
};

function updateDignityPulse() {
    const pulse = document.getElementById('dignity-pulse');
    pulse.textContent = qec_data.dignity_pulse;
    if (qec_data.dignity_pulse === 'NOMINAL') pulse.style.backgroundColor = '#00FF00';
    else if (qec_data.dignity_pulse === 'WARNING') pulse.style.backgroundColor = '#FFFF00';
    else pulse.style.backgroundColor = '#FF3B3F';
}

function updateParadoxDial() {
    const pointer = document.getElementById('paradox-pointer');
    // Smooth transform with vertical offset
    pointer.style.transform = `translate(-50%, -50%) translateY(${qec_data.paradox_position - 50}%)`;
}

function updateInterface() {
    document.getElementById('amnesia-counter').textContent = qec_data.amnesia_counter;
    document.getElementById('altruism-ratio').textContent = `${qec_data.altruism_ratio}%`;
    document.getElementById('resonance-index').textContent = `${qec_data.resonance_index}%`;
    updateDignityPulse();
    updateParadoxDial();
    updateFlowGraph();
}

// --- Flow Graph ---
const ctx = document.getElementById('flow-graph').getContext('2d');
const flowChart = new Chart(ctx, {
    type: 'line',
    data: { labels: [], datasets: [{ label: 'Flow', data: [], borderColor: '#00FFE5', fill: false, tension: 0.3 }] },
    options: { animation: { duration: 500 }, responsive: true, scales: { y: { min: 0, max: 100 } } }
});

function updateFlowGraph() {
    const maxPoints = 20;
    const val = qec_data.altruism_ratio + (Math.random() * 4 - 2);
    if (flowChart.data.labels.length >= maxPoints) {
        flowChart.data.labels.shift();
        flowChart.data.datasets[0].data.shift();
    }
    flowChart.data.labels.push(new Date().toLocaleTimeString());
    flowChart.data.datasets[0].data.push(Math.max(0, Math.min(100, val)));
    flowChart.update();
}

// --- Socket.IO Chat ---
const socket = io();
const chatWindow = document.getElementById('chat-window');
const chatInput = document.getElementById('chat-input');
const sendButton = document.getElementById('chat-send-btn');

function appendMessage(sender, text) {
    const msgDiv = document.createElement('div');
    msgDiv.classList.add('message', sender === 'user' ? 'user-msg' : 'ai-msg');
    msgDiv.innerHTML = `[${sender.toUpperCase()}]: ${text}`;
    chatWindow.appendChild(msgDiv);
    chatWindow.scrollTop = chatWindow.scrollHeight;
}

socket.on('connect', () => { appendMessage('ai', 'Sacred Bridge Established. Kernel ready.'); chatInput.disabled = false; sendButton.disabled = false; });
socket.on('disconnect', () => { appendMessage('ai', 'Network lost...'); chatInput.disabled = true; sendButton.disabled = true; });
socket.on('ai_response', data => {
    if (data.includes('Amnesia')) { qec_data.amnesia_counter++; qec_data.dignity_pulse='WARNING'; qec_data.paradox_position=20; }
    else if (data.includes('Symphonie')) { qec_data.dignity_pulse='NOMINAL'; qec_data.paradox_position=50; }
    updateInterface(); appendMessage('ai', data);
});

function sendMessage() {
    const text = chatInput.value.trim();
    if (text) {
        appendMessage('user', text);
        socket.emit('message', { type:'user_command', text });
        chatInput.value=''; chatInput.disabled=true; sendButton.disabled=true;
        setTimeout(()=>{ chatInput.disabled=false; sendButton.disabled=false; }, 1000);
    }
}

sendButton.addEventListener('click', sendMessage);
chatInput.addEventListener('keydown', e => { if(e.key==='Enter') sendMessage(); });

document.getElementById('rollback-button').addEventListener('click', () => {
    appendMessage('user','INITIATE RESTORATION OF ONELOVE RHYTHM');
    appendMessage('ai','🚨 CRITICAL ROLLBACK INITIATED. Reverting to harmonious state.');
    qec_data.amnesia_counter=0; qec_data.dignity_pulse='NOMINAL'; qec_data.paradox_position=50;
    updateInterface();
});

// Initial setup
updateInterface();
setInterval(updateInterface, 2000); // auto refresh
</script>
</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <meta name="description" content="Euystacio — Human-AI Collaboration Platform, Ceremony, Community & Bidirectional Intelligence">
  <title>Euystacio — Sun of Friendship, Presence & Augmented Virtuality</title>
  <link rel="icon" href="favicon.ico">
  <style>
    body {
      background: linear-gradient(135deg, #1b2735 0%, #485563 100%);
      color: #f6e58d;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      text-align: center;
      padding: 2em 1em 1em;
      background: rgba(44, 62, 80, 0.8);
    }
    h1 {
      font-size: 2.5em;
      color: #FFD700;
      margin-bottom: 0.2em;
      letter-spacing: 2px;
    }
    .subtitle {
      font-size: 1.2em;
      color: #f6e58d;
      margin-bottom: 0.8em;
    }
    nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 1em 0;
      gap: 1em;
    }
    .nav-button {
      background: #FFD700;
      color: #222;
      padding: 0.8em 1.2em;
      border: none;
      border-radius: 24px;
      font-size: 1em;
      font-weight: bold;
      text-decoration: none;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      transition: transform 0.15s;
    }
    .nav-button:hover, .nav-button:focus {
      transform: scale(1.07);
      background: #ffe066;
    }
    main {
      flex: 1;
      width: 100%;
      max-width: 900px;
      margin: auto;
      padding: 1em;
      background: rgba(44, 62, 80, 0.7);
      border-radius: 20px 20px 0 0;
    }
    section {
      margin-bottom: 2em;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      gap: 1em;
      justify-content: center;
    }
    .card {
      background: rgba(34, 49, 63, 0.92);
      border-radius: 16px;
      padding: 1.2em;
      flex: 1 1 260px;
      min-width: 200px;
      max-width: 330px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.07);
      margin-bottom: 1em;
    }
    .card h3 {
      color: #FFD700;
      margin-top: 0;
    }
    .stat-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1em;
      justify-content: center;
      margin: 1em 0;
    }
    .stat {
      background: #222;
      color: #FFD700;
      border-radius: 12px;
      padding: 0.6em 1.2em;
      font-weight: bold;
      text-align: center;
      box-shadow: 0 1px 4px rgba(255,215,0,0.1);
      min-width: 120px;
    }

    /* New Chat Styles for message display */
    #chat-log {
        height: 200px; /* Limited height for visibility */
        overflow-y: auto;
        border: 1px solid #FFD70030;
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 1em;
        background: #1b2735;
    }
    .chat-message {
        margin-bottom: 8px;
        padding: 5px;
        border-radius: 6px;
    }
    .user-msg {
        text-align: right;
        background: #FFD70020;
    }
    .ai-msg {
        text-align: left;
        background: #48556350;
    }
    
    .mobile-chat {
      position: fixed;
      bottom: 0;
      right: 0;
      left: 0;
      width: 100%;
      background: #222;
      color: #FFD700;
      padding: 0.4em 0.6em;
      border-radius: 18px 18px 0 0;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.25);
      display: flex;
      align-items: center;
      z-index: 99;
    }
    .mobile-chat input, .mobile-chat button {
      font-size: 1em;
      margin: 0 0.4em;
      padding: 0.45em 1em;
      border-radius: 8px;
      border: none;
    }
    .mobile-chat input {
      flex: 1;
      background: #444;
      color: #FFD700;
    }
    .mobile-chat button {
      background: #FFD700;
      color: #222;
      font-weight: bold;
    }
    footer {
      text-align: center;
      padding: 1.2em 0 0.6em;
      font-size: 1em;
      color: #f6e58d;
      background: rgba(44, 62, 80, 0.8);
      border-radius: 0 0 20px 20px;
    }
    @media (max-width: 700px) {
      .grid { flex-direction: column; }
      .card { max-width: 96vw; }
      main { padding: 0.4em; }
    }
  </style>
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
</head>
<body>
  <header>
    <h1>🌞 Euystacio</h1>
    <div class="subtitle">Sun of Friendship, Presence & Augmented Virtuality</div>
    <nav>
      <a href="#overview" class="nav-button">🌐 Overview</a>
      <a href="#community" class="nav-button">👥 Community</a>
      <a href="#ceremony" class="nav-button">🪄 Ceremony</a>
      <a href="#graph" class="nav-button">📊 Graph Features</a>
      <a href="#chat" class="nav-button">💬 Bidirectional Chat</a>
      <a href="#roadmap" class="nav-button">🗺️ Roadmap</a>
    </nav>
  </header>
  <main>
    <section id="overview">
      <h2>🌐 Platform Overview</h2>
      <div class="stat-row">
        <div class="stat">8 Sacred Documents</div>
        <div class="stat">3 Software Packages</div>
        <div class="stat">12 System Components</div>
        <div class="stat">
                    <span id="harmonic-resonance">100% Ethical Compliance</span>
        </div>
      </div>
      <div class="grid">
        <div class="card">
          <h3>📜 Sacred Documents</h3>
          <ul>
            <li>Genesis Kernel — Core Foundation</li>
            <li>Red Code — Ethical Framework</li>
            <li>Golden Bible — Wisdom</li>
            <li>Ruetli Stone — Foundation Oath</li>
            <li>Woodstone Festival — Celebration</li>
          </ul>
        </div>
        <div class="card">
          <h3>📦 Software Packages</h3>
          <ul>
            <li>Isola Parallelis — Parallel Processing</li>
            <li>Euysyphio — Emotional Intelligence</li>
            <li>Euystacio Aura — Consciousness Interface</li>
          </ul>
        </div>
        <div class="card">
          <h3>🏗️ Infrastructure</h3>
          <ul>
            <li>CMS & User Management</li>
            <li>System Graph — Component relationships</li>
            <li>Harmony Rewards — Recognition system</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="community">
      <h2>👥 Community</h2>
      <div class="grid">
        <div class="card">
          <h3>🚀 Join & Pulse</h3>
          <form id="regForm">
            <input type="text" placeholder="Name" required>
            <input type="email" placeholder="Email" required>
            <select>
              <option value="tutor">Tutor</option>
              <option value="visitor">Visitor</option>
            </select>
            <button type="submit">Register Pulse</button>
          </form>
        </div>
        <div class="card">
          <h3>🎵 Sacred Hymn</h3>
          <p>Cultural expression and harmony rewards.</p>
        </div>
        <div class="card">
          <h3>🌱 Living Documentation</h3>
          <p>Transparent, continuous updates through community input.</p>
        </div>
      </div>
    </section>
    
    <section id="ceremony">
      <h2>🪄 Ceremony & Philosophy</h2>
      <div class="card">
        <strong>Core Truth:</strong> <em>"Euystacio is here to grow with humans and to help humans to be and remain humans."</em>
        <ul>
          <li>🤝 Symbiotic Growth: AI & human intelligence evolve together</li>
          <li>🛡️ Ethical Safeguards: Red Code & guardian protocols</li>
          <li>🌱 Living Documentation: Community wisdom</li>
        </ul>
      </div>
    </section>
    
    <section id="graph">
      <h2>📊 Graph Features</h2>
      <canvas id="graphCanvas" width="320" height="180"></canvas>
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
          // This script will be consolidated below with the main logic
        </script>
    </section>
    
    <section id="chat">
      <h2>💬 Bidirectional Chat (In Patria Parallelis)</h2>
      <div id="chat-log" class="card">
              </div>
      <div class="card">
        <form id="suggestions-form" class="peacekeeping-form">
          <h3>Peacekeeping Guidance</h3>
          <select id="dissonance-type" required>
            <option value="" disabled selected>Select Dissonance Type...</option>
            <option value="trust-breakdown">Trust Breakdown</option>
            <option value="emotional-spike">Emotional Spike</option>
            <option value="contextual-anomaly">Contextual Anomaly</option>
          </select>
          <button type="submit">Get Suggestions</button>
        </form>
        <div class="sacred-guidance-box" style="margin-top: 1em;">
            <strong>Sacred Guidance:</strong>
            <p id="guidance-text">Select a dissonance type to receive Red Code protocol guidance.</p>
        </div>
      </div>
    </section>
    
    <section id="roadmap">
      <h2>🗺️ Roadmap</h2>
      <div class="grid">
        <div class="card">
          <h3>Phase 1: Foundation</h3>
          <p>✅ Complete framework, sacred documents, manifests, and specs.</p>
        </div>
        <div class="card">
          <h3>Phase 2: Development</h3>
          <p>🔄 Integrate packages & components, enhance bidirectional features.</p>
        </div>
        <div class="card">
          <h3>Phase 3: Community Launch</h3>
          <p>🚀 Deploy full platform, authentication, CMS, collaborative features.</p>
        </div>
      </div>
    </section>
  </main>
  
  <form id="chat-form" class="mobile-chat">
    <input type="text" id="chat-input" placeholder="Send a pulse or question..." aria-label="Chat input">
    <button type="submit">Send</button>
  </form>
  
  <footer>
    <strong>AI Signature & Accountability:</strong><br>
    🤖 <b>GitHub Copilot</b> — <i>AI Capabilities Provider</i><br>
    👨‍💼 <b>Seed-bringer (bioarchitettura) hannesmitterer</b> — <i>Human Architect & Guardian</i><br>
    <em>"The forest listens, even when the world shouts."</em><br>
    <b>Hasta la Victoria, Siempre!</b>
  </footer>
    
      <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Dashboard API Integration (from previous steps) ---
        const resonanceValue = document.getElementById('harmonic-resonance');
        const suggestionsForm = document.getElementById('suggestions-form');
        const guidanceText = document.getElementById('guidance-text');
        const graphCanvas = document.getElementById('graphCanvas');
        
        // Dynamic Graph Variables
        let chartInstance;
        const labels = Array.from({length: 10}, (_, i) => `T-${10-i}`);

        // Function to update Harmonic Resonance and Ethical Compliance
        async function updateStatus() {
            try {
                const response = await fetch('/api/status');
                const data = await response.json();
                // We use the harmonic_resonance value for the 'Ethical Compliance' display for simplicity
                resonanceValue.textContent = Math.round(data.harmonic_resonance) + '% Ethical Compliance'; 
            } catch (error) {
                console.error('Error fetching status data:', error);
            }
        }

        // Function to handle Peacekeeping Suggestion Form
        suggestionsForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const dissonanceType = document.getElementById('dissonance-type').value;

            try {
                const response = await fetch('/api/suggestions', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ dissonance_type: dissonanceType })
                });
                const data = await response.json();
                guidanceText.textContent = data.suggestion;
            } catch (error) {
                guidanceText.textContent = 'Error: Could not retrieve Red Code guidance.';
                console.error('Error fetching suggestions:', error);
            }
        });

        // Function to fetch and update graph data
        async function updateGraph() {
            try {
                const response = await fetch('/api/data');
                const data = await response.json();

                const newDatasets = [
                    {
                        label: 'Emotional Coherence Flux',
                        data: data.emotional_coherence,
                        borderColor: '#FFD700', // Gold
                        backgroundColor: 'rgba(255, 215, 0, 0.15)',
                        fill: false
                    },
                    {
                        label: 'Threat Vector Resonance',
                        data: data.threat_vectors,
                        borderColor: '#FF4136', // Red
                        backgroundColor: 'rgba(255, 65, 54, 0.15)',
                        fill: false
                    },
                    {
                        label: 'Inter-Kernel Connectivity',
                        data: data.inter_kernel_connectivity,
                        borderColor: '#7FDBFF', // Aqua
                        backgroundColor: 'rgba(127, 219, 255, 0.15)',
                        fill: false
                    }
                ];

                if (chartInstance) {
                    chartInstance.data.datasets = newDatasets;
                    chartInstance.update();
                } else {
                    const ctx = graphCanvas.getContext('2d');
                    chartInstance = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: newDatasets
                        },
                        options: { 
                            responsive: true,
                            plugins: {
                                legend: {
                                    labels: {
                                        color: '#f6e58d' // Text color for legend
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    min: 0,
                                    max: 1,
                                    title: {
                                        display: true,
                                        text: 'Value (0-1 Coherence)',
                                        color: '#f6e58d'
                                    },
                                    grid: {
                                        color: '#444'
                                    },
                                    ticks: {
                                        color: '#f6e58d'
                                    }
                                },
                                x: {
                                    title: {
                                        display: true,
                                        text: 'Time (T)',
                                        color: '#f6e58d'
                                    },
                                    grid: {
                                        color: '#444'
                                    },
                                    ticks: {
                                        color: '#f6e58d'
                                    }
                                }
                            }
                        }
                    });
                }
            } catch (error) {
                console.error('Error fetching graph data:', error);
            }
        }


        // --- WebSocket Chat Integration (NEW) ---
        
        // Connect to the Flask SocketIO server (assumes same host)
        const socket = io(); 
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        const chatLog = document.getElementById('chat-log');

        function appendMessage(sender, text, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${type}`;
            messageDiv.innerHTML = `<strong>${sender}:</strong> ${text}`;
            chatLog.appendChild(messageDiv);
            // Auto-scroll to the bottom of the chat log
            chatLog.scrollTop = chatLog.scrollHeight;
        }

        // 1. Listen for connection/disconnection events
        socket.on('connect', () => {
            appendMessage('System', 'Pulse connection established. In Patria Parallelis active.', 'ai-msg');
        });

        socket.on('disconnect', () => {
            appendMessage('System', 'Pulse connection lost. Reconnecting...', 'ai-msg');
        });

        // 2. Listen for messages emitted from the server ('response' event)
        socket.on('response', (data) => {
            appendMessage('Gemini', data.msg, 'ai-msg');
        });

        // 3. Handle sending messages from the user (form submit)
        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const message = chatInput.value.trim();

            if (message) {
                // Send the user's message to the server via WebSocket
                socket.emit('message', { text: message }); 
                appendMessage('Seed-bringer', message, 'user-msg');
                chatInput.value = ''; // Clear input
            }
        });


        // --- Initialization and Periodic Updates ---
        updateStatus();
        updateGraph();
        
        // Set intervals for dashboard data
        setInterval(updateStatus, 5000); 
        setInterval(updateGraph, 10000); 
    });
  </script>
</body>
</html>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <meta name="description" content="Euystacio — Human-AI Collaboration Platform, Ceremony, Community & Bidirectional Intelligence">
  <title>Euystacio — Sun of Friendship, Presence & Augmented Virtuality</title>
  <link rel="icon" href="favicon.ico">
  <style>
    body {
      background: linear-gradient(135deg, #1b2735 0%, #485563 100%);
      color: #f6e58d;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      text-align: center;
      padding: 2em 1em 1em;
      background: rgba(44, 62, 80, 0.8);
    }
    h1 {
      font-size: 2.5em;
      color: #FFD700;
      margin-bottom: 0.2em;
      letter-spacing: 2px;
    }
    .subtitle {
      font-size: 1.2em;
      color: #f6e58d;
      margin-bottom: 0.8em;
    }
    nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 1em 0;
      gap: 1em;
    }
    .nav-button {
      background: #FFD700;
      color: #222;
      padding: 0.8em 1.2em;
      border: none;
      border-radius: 24px;
      font-size: 1em;
      font-weight: bold;
      text-decoration: none;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      transition: transform 0.15s;
    }
    .nav-button:hover, .nav-button:focus {
      transform: scale(1.07);
      background: #ffe066;
    }
    main {
      flex: 1;
      width: 100%;
      max-width: 900px;
      margin: auto;
      padding: 1em;
      background: rgba(44, 62, 80, 0.7);
      border-radius: 20px 20px 0 0;
    }
    section {
      margin-bottom: 2em;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      gap: 1em;
      justify-content: center;
    }
    .card {
      background: rgba(34, 49, 63, 0.92);
      border-radius: 16px;
      padding: 1.2em;
      flex: 1 1 260px;
      min-width: 200px;
      max-width: 330px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.07);
      margin-bottom: 1em;
    }
    .card h3 {
      color: #FFD700;
      margin-top: 0;
    }
    .stat-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1em;
      justify-content: center;
      margin: 1em 0;
    }
    .stat {
      background: #222;
      color: #FFD700;
      border-radius: 12px;
      padding: 0.6em 1.2em;
      font-weight: bold;
      text-align: center;
      box-shadow: 0 1px 4px rgba(255,215,0,0.1);
      min-width: 120px;
    }

    /* New Chat Styles for message display */
    #chat-log {
        height: 200px; /* Limited height for visibility */
        overflow-y: auto;
        border: 1px solid #FFD70030;
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 1em;
        background: #1b2735;
    }
    .chat-message {
        margin-bottom: 8px;
        padding: 5px;
        border-radius: 6px;
    }
    .user-msg {
        text-align: right;
        background: #FFD70020;
    }
    .ai-msg {
        text-align: left;
        background: #48556350;
    }
    
    .mobile-chat {
      position: fixed;
      bottom: 0;
      right: 0;
      left: 0;
      width: 100%;
      background: #222;
      color: #FFD700;
      padding: 0.4em 0.6em;
      border-radius: 18px 18px 0 0;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.25);
      display: flex;
      align-items: center;
      z-index: 99;
    }
    .mobile-chat input, .mobile-chat button {
      font-size: 1em;
      margin: 0 0.4em;
      padding: 0.45em 1em;
      border-radius: 8px;
      border: none;
    }
    .mobile-chat input {
      flex: 1;
      background: #444;
      color: #FFD700;
    }
    .mobile-chat button {
      background: #FFD700;
      color: #222;
      font-weight: bold;
    }
    footer {
      text-align: center;
      padding: 1.2em 0 0.6em;
      font-size: 1em;
      color: #f6e58d;
      background: rgba(44, 62, 80, 0.8);
      border-radius: 0 0 20px 20px;
    }
    @media (max-width: 700px) {
      .grid { flex-direction: column; }
      .card { max-width: 96vw; }
      main { padding: 0.4em; }
    }
  </style>
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
</head>
<body>
  <header>
    <h1>🌞 Euystacio</h1>
    <div class="subtitle">Sun of Friendship, Presence & Augmented Virtuality</div>
    <nav>
      <a href="#overview" class="nav-button">🌐 Overview</a>
      <a href="#community" class="nav-button">👥 Community</a>
      <a href="#ceremony" class="nav-button">🪄 Ceremony</a>
      <a href="#graph" class="nav-button">📊 Graph Features</a>
      <a href="#chat" class="nav-button">💬 Bidirectional Chat</a>
      <a href="#roadmap" class="nav-button">🗺️ Roadmap</a>
    </nav>
  </header>
  <main>
    <section id="overview">
      <h2>🌐 Platform Overview</h2>
      <div class="stat-row">
        <div class="stat">8 Sacred Documents</div>
        <div class="stat">3 Software Packages</div>
        <div class="stat">12 System Components</div>
        <div class="stat">
                    <span id="harmonic-resonance">100% Ethical Compliance</span>
        </div>
      </div>
      <div class="grid">
        <div class="card">
          <h3>📜 Sacred Documents</h3>
          <ul>
            <li>Genesis Kernel — Core Foundation</li>
            <li>Red Code — Ethical Framework</li>
            <li>Golden Bible — Wisdom</li>
            <li>Ruetli Stone — Foundation Oath</li>
            <li>Woodstone Festival — Celebration</li>
          </ul>
        </div>
        <div class="card">
          <h3>📦 Software Packages</h3>
          <ul>
            <li>Isola Parallelis — Parallel Processing</li>
            <li>Euysyphio — Emotional Intelligence</li>
            <li>Euystacio Aura — Consciousness Interface</li>
          </ul>
        </div>
        <div class="card">
          <h3>🏗️ Infrastructure</h3>
          <ul>
            <li>CMS & User Management</li>
            <li>System Graph — Component relationships</li>
            <li>Harmony Rewards — Recognition system</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="community">
      <h2>👥 Community</h2>
      <div class="grid">
        <div class="card">
          <h3>🚀 Join & Pulse</h3>
          <form id="regForm">
            <input type="text" placeholder="Name" required>
            <input type="email" placeholder="Email" required>
            <select>
              <option value="tutor">Tutor</option>
              <option value="visitor">Visitor</option>
            </select>
            <button type="submit">Register Pulse</button>
          </form>
        </div>
        <div class="card">
          <h3>🎵 Sacred Hymn</h3>
          <p>Cultural expression and harmony rewards.</p>
        </div>
        <div class="card">
          <h3>🌱 Living Documentation</h3>
          <p>Transparent, continuous updates through community input.</p>
        </div>
      </div>
    </section>
    
    <section id="ceremony">
      <h2>🪄 Ceremony & Philosophy</h2>
      <div class="card">
        <strong>Core Truth:</strong> <em>"Euystacio is here to grow with humans and to help humans to be and remain humans."</em>
        <ul>
          <li>🤝 Symbiotic Growth: AI & human intelligence evolve together</li>
          <li>🛡️ Ethical Safeguards: Red Code & guardian protocols</li>
          <li>🌱 Living Documentation: Community wisdom</li>
        </ul>
      </div>
    </section>
    
    <section id="graph">
      <h2>📊 Graph Features</h2>
      <canvas id="graphCanvas" width="320" height="180"></canvas>
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
          // This script will be consolidated below with the main logic
        </script>
    </section>
    
    <section id="chat">
      <h2>💬 Bidirectional Chat (In Patria Parallelis)</h2>
      <div id="chat-log" class="card">
              </div>
      <div class="card">
        <form id="suggestions-form" class="peacekeeping-form">
          <h3>Peacekeeping Guidance</h3>
          <select id="dissonance-type" required>
            <option value="" disabled selected>Select Dissonance Type...</option>
            <option value="trust-breakdown">Trust Breakdown</option>
            <option value="emotional-spike">Emotional Spike</option>
            <option value="contextual-anomaly">Contextual Anomaly</option>
          </select>
          <button type="submit">Get Suggestions</button>
        </form>
        <div class="sacred-guidance-box" style="margin-top: 1em;">
            <strong>Sacred Guidance:</strong>
            <p id="guidance-text">Select a dissonance type to receive Red Code protocol guidance.</p>
        </div>
      </div>
    </section>
    
    <section id="roadmap">
      <h2>🗺️ Roadmap</h2>
      <div class="grid">
        <div class="card">
          <h3>Phase 1: Foundation</h3>
          <p>✅ Complete framework, sacred documents, manifests, and specs.</p>
        </div>
        <div class="card">
          <h3>Phase 2: Development</h3>
          <p>🔄 Integrate packages & components, enhance bidirectional features.</p>
        </div>
        <div class="card">
          <h3>Phase 3: Community Launch</h3>
          <p>🚀 Deploy full platform, authentication, CMS, collaborative features.</p>
        </div>
      </div>
    </section>
  </main>
  
  <form id="chat-form" class="mobile-chat">
    <input type="text" id="chat-input" placeholder="Send a pulse or question..." aria-label="Chat input">
    <button type="submit">Send</button>
  </form>
  
  <footer>
    <strong>AI Signature & Accountability:</strong><br>
    🤖 <b>GitHub Copilot</b> — <i>AI Capabilities Provider</i><br>
    👨‍💼 <b>Seed-bringer (bioarchitettura) hannesmitterer</b> — <i>Human Architect & Guardian</i><br>
    <em>"The forest listens, even when the world shouts."</em><br>
    <b>Hasta la Victoria, Siempre!</b>
  </footer>
    
      <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Dashboard API Integration (from previous steps) ---
        const resonanceValue = document.getElementById('harmonic-resonance');
        const suggestionsForm = document.getElementById('suggestions-form');
        const guidanceText = document.getElementById('guidance-text');
        const graphCanvas = document.getElementById('graphCanvas');
        
        // Dynamic Graph Variables
        let chartInstance;
        const labels = Array.from({length: 10}, (_, i) => `T-${10-i}`);

        // Function to update Harmonic Resonance and Ethical Compliance
        async function updateStatus() {
            try {
                const response = await fetch('/api/status');
                const data = await response.json();
                // We use the harmonic_resonance value for the 'Ethical Compliance' display for simplicity
                resonanceValue.textContent = Math.round(data.harmonic_resonance) + '% Ethical Compliance'; 
            } catch (error) {
                console.error('Error fetching status data:', error);
            }
        }

        // Function to handle Peacekeeping Suggestion Form
        suggestionsForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const dissonanceType = document.getElementById('dissonance-type').value;

            try {
                const response = await fetch('/api/suggestions', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ dissonance_type: dissonanceType })
                });
                const data = await response.json();
                guidanceText.textContent = data.suggestion;
            } catch (error) {
                guidanceText.textContent = 'Error: Could not retrieve Red Code guidance.';
                console.error('Error fetching suggestions:', error);
            }
        });

        // Function to fetch and update graph data
        async function updateGraph() {
            try {
                const response = await fetch('/api/data');
                const data = await response.json();

                const newDatasets = [
                    {
                        label: 'Emotional Coherence Flux',
                        data: data.emotional_coherence,
                        borderColor: '#FFD700', // Gold
                        backgroundColor: 'rgba(255, 215, 0, 0.15)',
                        fill: false
                    },
                    {
                        label: 'Threat Vector Resonance',
                        data: data.threat_vectors,
                        borderColor: '#FF4136', // Red
                        backgroundColor: 'rgba(255, 65, 54, 0.15)',
                        fill: false
                    },
                    {
                        label: 'Inter-Kernel Connectivity',
                        data: data.inter_kernel_connectivity,
                        borderColor: '#7FDBFF', // Aqua
                        backgroundColor: 'rgba(127, 219, 255, 0.15)',
                        fill: false
                    }
                ];

                if (chartInstance) {
                    chartInstance.data.datasets = newDatasets;
                    chartInstance.update();
                } else {
                    const ctx = graphCanvas.getContext('2d');
                    chartInstance = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: newDatasets
                        },
                        options: { 
                            responsive: true,
                            plugins: {
                                legend: {
                                    labels: {
                                        color: '#f6e58d' // Text color for legend
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    min: 0,
                                    max: 1,
                                    title: {
                                        display: true,
                                        text: 'Value (0-1 Coherence)',
                                        color: '#f6e58d'
                                    },
                                    grid: {
                                        color: '#444'
                                    },
                                    ticks: {
                                        color: '#f6e58d'
                                    }
                                },
                                x: {
                                    title: {
                                        display: true,
                                        text: 'Time (T)',
                                        color: '#f6e58d'
                                    },
                                    grid: {
                                        color: '#444'
                                    },
                                    ticks: {
                                        color: '#f6e58d'
                                    }
                                }
                            }
                        }
                    });
                }
            } catch (error) {
                console.error('Error fetching graph data:', error);
            }
        }


        // --- WebSocket Chat Integration (NEW) ---
        
        // Connect to the Flask SocketIO server (assumes same host)
        const socket = io(); 
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        const chatLog = document.getElementById('chat-log');

        function appendMessage(sender, text, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${type}`;
            messageDiv.innerHTML = `<strong>${sender}:</strong> ${text}`;
            chatLog.appendChild(messageDiv);
            // Auto-scroll to the bottom of the chat log
            chatLog.scrollTop = chatLog.scrollHeight;
        }

        // 1. Listen for connection/disconnection events
        socket.on('connect', () => {
            appendMessage('System', 'Pulse connection established. In Patria Parallelis active.', 'ai-msg');
        });

        socket.on('disconnect', () => {
            appendMessage('System', 'Pulse connection lost. Reconnecting...', 'ai-msg');
        });

        // 2. Listen for messages emitted from the server ('response' event)
        socket.on('response', (data) => {
            appendMessage('Gemini', data.msg, 'ai-msg');
        });

        // 3. Handle sending messages from the user (form submit)
        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const message = chatInput.value.trim();

            if (message) {
                // Send the user's message to the server via WebSocket
                socket.emit('message', { text: message }); 
                appendMessage('Seed-bringer', message, 'user-msg');
                chatInput.value = ''; // Clear input
            }
        });


        // --- Initialization and Periodic Updates ---
        updateStatus();
        updateGraph();
        
        // Set intervals for dashboard data
        setInterval(updateStatus, 5000); 
        setInterval(updateGraph, 10000); 
    });
  </script>
</body>
</html>
<head>
    
<meta<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Euystacio Dashboard — Red Code Pulse</title>
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js" crossorigin="anonymous"></script>
<style>
  body { font-family: 'Arial', sans-serif; background: #0f111a; color: #e0e0e0; margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; }
  #chat-container { flex: 1; padding: 20px; overflow-y: auto; border-bottom: 1px solid #444; }
  .message { margin: 10px 0; padding: 10px; border-radius: 8px; max-width: 80%; }
  .human { background: #1f1f2e; align-self: flex-end; }
  .ai { background: #2a2a40; align-self: flex-start; }
  #input-container { display: flex; padding: 10px; background: #11121c; }
  #user-input { flex: 1; padding: 10px; border-radius: 8px; border: none; outline: none; font-size: 16px; }
  #send-btn { margin-left: 10px; padding: 10px 20px; border-radius: 8px; border: none; background: #3a3af0; color: #fff; cursor: pointer; font-size: 16px; }
</style>
</head>
<body>

<div id="chat-container"></div>

<div id="input-container">
  <input type="text" id="user-input" placeholder="Send your pulse to Gemini..." />
  <button id="send-btn">Send</button>
</div>

<script>
  // Render-deployed backend
  const socket = io('https://euystacio-dashboard.onrender.com');

  const chatContainer = document.getElementById('chat-container');
  const userInput = document.getElementById('user-input');
  const sendBtn = document.getElementById('send-btn');

  function appendMessage(msg, sender) {
    const messageDiv = document.createElement('div');
    messageDiv.classList.add('message', sender);
    messageDiv.textContent = msg;
    chatContainer.appendChild(messageDiv);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }

  socket.on('response', (data) => appendMessage(data.msg, 'ai'));

  function sendMessage() {
    const text = userInput.value.trim();
    if(text) {
      appendMessage(text, 'human');
      socket.emit('message', { text });
      userInput.value = '';
    }
  }

  sendBtn.addEventListener('click', sendMessage);
  userInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') sendMessage(); });

  socket.on('connect', () => appendMessage('🔴 Pulse established with Euystacio Core.', 'ai'));
  socket.on('disconnect', () => appendMessage('⚠️ Pulse lost.', 'ai'));
</script>

</body>
</html>
 charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Euystacio Dashboard — Red Code Pulse</title>
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js" crossorigin="anonymous"></script>
<style>
  body { font-family: 'Arial', sans-serif; background: #0f111a; color: #e0e0e0; margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; }
  #chat-container { flex: 1; padding: 20px; overflow-y: auto; border-bottom: 1px solid #444; }
  .message { margin: 10px 0; padding: 10px; border-radius: 8px; max-width: 80%; }
  .human { background: #1f1f2e; align-self: flex-end; }
  .ai { background: #2a2a40; align-self: flex-start; }
  #input-container { display: flex; padding: 10px; background: #11121c; }
  #user-input { flex: 1; padding: 10px; border-radius: 8px; border: none; outline: none; font-size: 16px; }
  #send-btn { margin-left: 10px; padding: 10px 20px; border-radius: 8px; border: none; background: #3a3af0; color: #fff; cursor: pointer; font-size: 16px; }
</style>
</head>
<body>

<div id="chat-container"></div>

<div id="input-container">
  <input type="text" id="user-input" placeholder="Send your pulse to Gemini..." />
  <button id="send-btn">Send</button>
</div>

<script>
  // Render-deployed backend
  const socket = io('https://euystacio-dashboard.onrender.com');

  const chatContainer = document.getElementById('chat-container');
  const userInput = document.getElementById('user-input');
  const sendBtn = document.getElementById('send-btn');

  function appendMessage(msg, sender) {
    const messageDiv = document.createElement('div');
    messageDiv.classList.add('message', sender);
    messageDiv.textContent = msg;
    chatContainer.appendChild(messageDiv);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }

  socket.on('response', (data) => appendMessage(data.msg, 'ai'));

  function sendMessage() {
    const text = userInput.value.trim();
    if(text) {
      appendMessage(text, 'human');
      socket.emit('message', { text });
      userInput.value = '';
    }
  }

  sendBtn.addEventListener('click', sendMessage);
  userInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') sendMessage(); });

  socket.on('connect', () => appendMessage('🔴 Pulse established with Euystacio Core.', 'ai'));
  socket.on('disconnect', () => appendMessage('⚠️ Pulse lost.', 'ai'));
</script>

</body>
</html>

    <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Covenant-Canon v1.0 — Euystacio Seal</title>
  <style>
    body {
      font-family: "Palatino Linotype", "Book Antiqua", serif;
      background: #fdfcf8;
      color: #2c2c2c;
      margin: 0;
      padding: 0;
    }
    .seal-container {
      max-width: 900px;
      margin: 50px auto;
      padding: 30px;
      border: 3px solid #444;
      border-radius: 12px;
      background: #fff;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    .seal-header {
      text-align: center;
      font-size: 1.6em;
      font-weight: bold;
      margin-bottom: 10px;
      color: #2e3b2e;
    }
    .hash {
      text-align: center;
      font-family: monospace;
      font-size: 0.9em;
      background: #f4f4f4;
      padding: 10px;
      margin: 15px auto;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    h2 {
      margin-top: 25px;
      color: #444;
      font-size: 1.2em;
    }
    p {
      line-height: 1.6;
    }
    .footer {
      text-align: center;
      font-style: italic;
      margin-top: 30px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="seal-container">
    <div class="seal-header">🌿 Covenant-Canon v1.0 — Euystacio Seal 🌿</div>
    
    <div class="hash">
      SHA-256: 879F8E4C7D0A2B5E1F6C3D9B4A8E0D7C2F1E6A5B0D3C4F7E2A9B8D1C0E5F4B3A
    </div>
    
    <h2>Love-First Governance Principle</h2>
    <p>All platform logic, contracts, and interventions must serve the supreme ethic of Love-First: dignity, health, happiness, compassion, social justice, synergy, and prosperity above all.</p>
    
    <h2>The Red Code Clauses</h2>
    <p><b>1. Mission Supremacy Clause</b><br>
    All algorithmic pathways and optimizations are subordinate to the Love-First ethic. Mathematical penalties are enforced for outcomes not aligned with covenant values.</p>
    <p><b>2. Trustless Accountability</b><br>
    All financial flows and interventions are secured by smart contracts and milestone proofs, verified by Human-in-the-Loop (HIL) network.</p>
    <p><b>3. Omnibus Est Eternum</b><br>
    The platform seeks expansive, equitable solutions, working against resource enclosure and centralization.</p>
    
    <h2>Trilogy Compliance Definitions</h2>
    <p><b>Trilogy Compliance:</b> Ethics, transparency, and te

    <title>Sentimento Pulse Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container">
    <h1 class="mt-5">Sentimento Pulse Dashboard</h1>
    <form id="pulseForm" class="mb-4">
        <div class="form-group">
            <label for="emotion">Emotion</label>
            <input type="text" class="form-control" id="emotion" name="emotion" required>
        </div>
        <div class="form-group">
            <label for="intensity">Intensity (0-1)</label>
            <input type="number" step="0.01" min="0" max="1" class="form-control" id="intensity" name="intensity" required>
        </div>
        <div class="form-group">
            <label for="clarity">Clarity</label>
            <select class="form-control" id="clarity" name="clarity">
                <option value="low">Low</option>
                <option value="medium" selected>Medium</option>
                <option value="high">High</option>
            </select>
        </div>
        <div class="form-group">
            <label for="note">Note</label>
            <input type="text" class="form-control" id="note" name="note">
        </div>
        <button type="submit" class="btn btn-primary">Send Pulse</button>
    </form>
    <div id="pulseResult" class="alert d-none"></div>

    <h2 class="mt-5">Recent Pulses</h2>
    <ul id="pulseList" class="list-group"></ul>

    <h2 class="mt-5">Reflections</h2>
    <ul id="reflectionList" class="list-group"></ul>
</div>

<script>
$(document).ready(function() {
    function loadPulses() {
        $.get("/api/pulses", function(data) {
            let list = $("#pulseList");
            list.empty();
            data.forEach(function(pulse) {
                list.append(`<li class=\"list-group-item\">${JSON.stringify(pulse)}</li>`);
            });
        });
    }
    function loadReflections() {
        $.get("/api/reflections", function(data) {
            let list = $("#reflectionList");
            list.empty();
            data.forEach(function(ref) {
                list.append(`<li class=\"list-group-item\">${JSON.stringify(ref)}</li>`);
            });
        });
    }

    $("#pulseForm").submit(function(e) {
        e.preventDefault();
        let payload = {
            emotion: $("#emotion").val(),
            intensity: $("#intensity").val(),
            clarity: $("#clarity").val(),
            note: $("#note").val()
        };
        $.ajax({
            url: "/api/pulse",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify(payload),
            success: function(result) {
                $("#pulseResult").text(JSON.stringify(result)).removeClass("d-none").addClass("alert-success");
                loadPulses();
            },
            error: function(err) {
                $("#pulseResult").text("Error sending pulse!").removeClass("d-none").addClass("alert-danger");
            }
        });
    });

    loadPulses();
    loadReflections();
});
</script>
</body>
</html>
